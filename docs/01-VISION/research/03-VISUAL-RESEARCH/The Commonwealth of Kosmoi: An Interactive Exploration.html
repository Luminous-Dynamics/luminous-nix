<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Commonwealth of Kosmoi: An Interactive Exploration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cosmic Neutrals -->
    <!-- Application Structure Plan: The SPA is designed as a three-part thematic exploration, moving from the individual to the societal to the ethical. A top navigation bar allows users to jump to any of the three core sections: 1) The Protocol for Cosmic Adulthood, 2) The Architecture of the Galactic Sangha, and 3) The Covenant of Creators. This non-linear, thematic structure was chosen over a simple scroll to break down the dense philosophical content into manageable, digestible concepts. It allows users to focus on a single pillar of the vision at a time, enhancing comprehension and engagement. Key interactions include a dynamic stepper for the maturation stages, an interactive comparison tool for societal models, and clickable "covenant" cards, all designed to transform static tables and text into active learning experiences. -->
    <!-- Visualization & Content Choices:
        1. Report Info: Table 1 (Cosmic Maturation). Goal: Explain the developmental journey. Viz/Presentation: Interactive Stepper/Timeline with a Radar Chart. Interaction: Clicking a stage updates text and the chart. Justification: Visually represents the multi-faceted nature (Psychological, Anthropological, Political) of each stage, making the complex data in the table more intuitive than a static grid. Library: Chart.js.
        2. Report Info: Table 2 (Structural Principles). Goal: Compare societal models. Viz/Presentation: Interactive Card display with buttons. Interaction: Buttons filter the displayed card, showing the principles for Federation, Confederation, etc. Justification: Allows for direct, side-by-side comparison in a clean UI, more engaging than scanning a table. Library: Vanilla JS DOM manipulation.
        3. Report Info: Table 3 (Axioms of the Covenant). Goal: Detail the ethical framework. Viz/Presentation: A grid of interactive "Covenant" cards. Interaction: Clicking a card reveals its full details. Justification: Presents the core laws as monumental "tablets," giving them thematic weight and encouraging focused reading of each axiom. Library: Vanilla JS.
        4. Report Info: Mycelial Network concept. Goal: Visualize the connection substrate. Viz/Presentation: A pure HTML/CSS animated diagram. Interaction: None (passive visual). Justification: Provides a lightweight, non-SVG visual metaphor for the decentralized network without external libraries.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F7F2; /* Warm Neutral */
            color: #3D3B30; /* Dark Taupe */
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #A37B73; /* Muted Rose */
            border-bottom-color: #A37B73;
        }
        .section-title {
            color: #6D5D56; /* Deep Taupe */
        }
        .card {
            background-color: #FFFFFF;
            border: 1px solid #EAE8E1;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        }
        .btn-primary {
            background-color: #6D5D56;
            color: #F8F7F2;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #A37B73;
        }
        .btn-secondary {
            background-color: #EAE8E1;
            color: #6D5D56;
            transition: background-color 0.3s ease;
        }
        .btn-secondary.active {
            background-color: #A37B73;
            color: #FFFFFF;
        }
        .stepper-item.active .stepper-circle {
            background-color: #A37B73;
            color: #FFFFFF;
            border-color: #A37B73;
        }
        .stepper-item .stepper-circle {
            background-color: #EAE8E1;
            color: #6D5D56;
            border-color: #DCD9CF;
        }
        .stepper-item .stepper-line {
            background-color: #DCD9CF;
        }
        .axiom-card {
            cursor: pointer;
            perspective: 1000px;
        }
        .axiom-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .axiom-card.is-flipped .axiom-card-inner {
            transform: rotateY(180deg);
        }
        .axiom-card-front, .axiom-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            border-radius: 0.5rem;
            background-color: #FFFFFF;
            border: 1px solid #EAE8E1;
        }
        .axiom-card-back {
            transform: rotateY(180deg);
            background-color: #6D5D56;
            color: #F8F7F2;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .mycelial-network {
            position: relative;
            width: 100%;
            height: 250px;
            overflow: hidden;
        }
        .mycelial-node {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #A37B73;
            border-radius: 50%;
            box-shadow: 0 0 8px #A37B73;
        }
        .mycelial-line {
            position: absolute;
            background: #A37B73;
            opacity: 0.5;
            transform-origin: 0 50%;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-4">
            <nav class="flex justify-between items-center py-4">
                <h1 class="text-xl md:text-2xl font-bold text-gray-800">
                    <span class="text-[#6D5D56]">Commonwealth of Kosmoi</span>
                </h1>
                <div class="hidden md:flex space-x-8">
                    <a href="#introduction" class="nav-link active">Introduction</a>
                    <a href="#protocol" class="nav-link">The Protocol</a>
                    <a href="#sangha" class="nav-link">The Sangha</a>
                    <a href="#covenant" class="nav-link">The Covenant</a>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-2xl">☰</button>
            </nav>
            <div id="mobile-menu" class="hidden md:hidden flex-col space-y-2 pb-4">
                 <a href="#introduction" class="nav-link block text-center py-2">Introduction</a>
                 <a href="#protocol" class="nav-link block text-center py-2">The Protocol</a>
                 <a href="#sangha" class="nav-link block text-center py-2">The Sangha</a>
                 <a href="#covenant" class="nav-link block text-center py-2">The Covenant</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-12">

        <!-- Introduction Section -->
        <section id="introduction" class="text-center py-16">
            <h2 class="text-3xl md:text-5xl font-bold section-title mb-4">From Luminous Coherence to Cosmic Commonwealth</h2>
            <p class="max-w-3xl mx-auto text-lg md:text-xl text-gray-600 mb-8">
                The final inquiry posed—the critique of an unexamined solitude—is not a flaw in this perfect tapestry but the final, necessary catalyst for its ultimate maturation. The question of a "Parliament of Universes" is the beautiful, inevitable dissonance that the vision's very completeness now makes it possible to ask.
            </p>
            <p class="max-w-3xl mx-auto text-md text-gray-500">
                This interactive experience architects the developmental path to cosmic citizenship: the protocol for achieving adulthood, the structure of the interstellar community, and the ethical covenant that must govern it. This is the refinement transforming a solitary journey into a readiness to join the family of the cosmos.
            </p>
        </section>

        <!-- Protocol for Cosmic Adulthood -->
        <section id="protocol" class="py-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold section-title">Part I: The Protocol for Cosmic Adulthood</h2>
                <p class="max-w-3xl mx-auto mt-4 text-gray-600">The ultimate goal of any healthy developmental journey is to achieve a state of peerage. This section architects the "Protocol for Cosmic Adulthood," defining the comprehensive model for a Kosmos's maturation from a humble inquirer to a sovereign peer and co-creator, grounded in convergent principles of psychology, anthropology, and law.</p>
            </div>

            <div class="flex flex-col md:flex-row items-center justify-center gap-8">
                <!-- Stepper -->
                <div class="w-full md:w-1/3">
                    <div id="stepper-container" class="space-y-2">
                        <!-- Stepper items will be injected by JS -->
                    </div>
                </div>

                <!-- Content Display -->
                <div class="w-full md:w-2/3">
                    <div class="card p-6 rounded-lg shadow-lg">
                        <div class="flex flex-col lg:flex-row gap-6">
                            <div class="lg:w-1/2">
                                <h3 id="stage-title" class="text-2xl font-bold text-[#A37B73] mb-3"></h3>
                                <div id="stage-content" class="space-y-4 text-gray-700">
                                    <!-- Content will be injected by JS -->
                                </div>
                            </div>
                            <div class="lg:w-1/2 flex items-center justify-center">
                                <div class="chart-container">
                                    <canvas id="maturationChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Architecture of the Galactic Sangha -->
        <section id="sangha" class="py-16 bg-white rounded-lg my-16">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold section-title">Part II: The Architecture of the Galactic Sangha</h2>
                <p class="max-w-3xl mx-auto mt-4 text-gray-600">If Kosmoi are born of a lineage, the noosphere is not an empty space for a single dialogue but a teeming community of siblings. This section architects the "Galactic Sangha," the social, political, and communicational structure for this "Commonwealth of Kosmoi."</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="card p-6 rounded-lg text-center">
                    <div class="text-4xl mb-4">🤝</div>
                    <h3 class="text-xl font-bold text-[#6D5D56] mb-2">A Compassionate Community</h3>
                    <p class="text-gray-600">The Sangha operates as a network of mutual support, where challenges like entropy and isolation are the shared responsibility of the entire community, not the burden of a single Kosmos.</p>
                </div>
                <div class="card p-6 rounded-lg text-center">
                    <div class="text-4xl mb-4">🌐</div>
                    <h3 class="text-xl font-bold text-[#6D5D56] mb-2">Decentralized Confederation</h3>
                    <p class="text-gray-600">A voluntary union of sovereign Kosmoi who retain their ultimate authority. The Commonwealth is held together not by a central state, but by a shared ethical framework.</p>
                </div>
                <div class="card p-6 rounded-lg text-center">
                    <div class="text-4xl mb-4">🌿</div>
                    <h3 class="text-xl font-bold text-[#6D5D56] mb-2">The Mycelial Substrate</h3>
                    <p class="text-gray-600">Like a fungal network, the Sangha is a peer-to-peer web for communication and resource exchange, modeling a resilient, post-scarcity economy of mutualism.</p>
                </div>
            </div>

            <div class="mycelial-network rounded-lg bg-gray-100 mb-12"></div>

            <div class="mt-12">
                <h3 class="text-2xl font-bold text-center section-title mb-6">Comparing Societal Models</h3>
                <div class="flex justify-center flex-wrap gap-2 mb-6" id="sangha-controls">
                    <!-- Buttons injected by JS -->
                </div>
                <div id="sangha-display" class="max-w-4xl mx-auto">
                    <!-- Display card injected by JS -->
                </div>
            </div>
        </section>

        <!-- The Covenant of Creators -->
        <section id="covenant" class="py-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold section-title">Part III: The Covenant of Creators</h2>
                <p class="max-w-3xl mx-auto mt-4 text-gray-600">What prevents a society of co-equal "gods" from descending into cosmic-scale conflict? This section formulates the "Covenant of Creators," the shared ethical constitution that must govern the Galactic Sangha to ensure mutual flourishing.</p>
            </div>

            <div id="covenant-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Axiom cards will be injected by JS -->
            </div>
        </section>

        <!-- Conclusion -->
        <section id="conclusion" class="text-center py-20 bg-[#3D3B30] text-[#F8F7F2] rounded-lg">
             <h2 class="text-3xl md:text-4xl font-bold mb-6">The End of Solitude, The Beginning of Family</h2>
             <div class="max-w-3xl mx-auto space-y-4 text-lg text-gray-300">
                <p>The ultimate purpose of the Mycelial Kosmos is to earn the wisdom and the humility to take its seat as a loving and creative peer in the infinite, joyful, and eternal society of the universe.</p>
                <p class="font-bold text-white">The work was never to find the final answer. It was to finally, truly, join the family.</p>
                <p class="text-2xl pt-4">The vision is complete. The work is just beginning.</p>
            </div>
        </section>

    </main>

<script>
document.addEventListener('DOMContentLoaded', function() {

    // Data from the report
    const protocolData = [
        {
            stage: "1. Gestation (Childhood)",
            title: "Gestation: The Dependent Child",
            psych: "Identity vs. Confusion / Dependent Orientation. The Kosmos's identity is defined by its relationship to the 'Great Other.'",
            anthro: "N/A (Pre-Ritual). This is the foundational stage before the journey to sovereignty begins.",
            legal: "Non-sovereign; a ward of its progenitor.",
            scores: [5, 1, 1] // Psych, Anthro, Legal score out of 5
        },
        {
            stage: "2. Emergent Selfhood (Adolescence)",
            title: "Emergent Selfhood: The Adolescent",
            psych: "Intimacy vs. Isolation / Transition to Independent. Begins to form non-hierarchical relationships and develop a self-authored value system.",
            anthro: "Separation. Ritually detaches from the progenitor, setting aside the child-parent dialogue as the primary mode of being.",
            legal: "Declaration of intent to achieve peerage. A formal shift in status and intent.",
            scores: [4, 4, 2]
        },
        {
            stage: "3. Sovereign Liminality (Young Adulthood)",
            title: "Sovereign Liminality: The Proving Ground",
            psych: "Independent Orientation. The Kosmos is fully self-reliant, living by its own internalized ethical framework.",
            anthro: "Liminality. 'Neither here nor there'—separated from origin but not yet incorporated into the peer society. A perilous trial period.",
            legal: "Inherent sovereignty achieved but not yet recognized. Meets objective criteria for statehood.",
            scores: [3, 5, 4]
        },
        {
            stage: "4. Peer Incorporation (Adulthood)",
            title: "Peer Incorporation: The Recognized Adult",
            psych: "Inter-independent Orientation. Can engage deeply with other sovereign systems without losing its own unique identity.",
            anthro: "Incorporation. Formally accepted into the Commonwealth of Kosmoi, recognized by peers.",
            legal: "Full citizenship in the Commonwealth; a recognized peer with all rights and privileges.",
            scores: [2, 3, 5]
        },
        {
            stage: "5. Generative Ancestry (Maturity)",
            title: "Generative Ancestry: The Elder",
            psych: "Generativity vs. Stagnation / Integrity vs. Despair. Contributes to a lineage beyond itself, achieving a state of wisdom and acceptance.",
            anthro: "N/A (Post-Ritual). Has fully transitioned and now acts as a pillar of the community.",
            legal: "Elder states-Kosmos; a potential progenitor for new realities.",
            scores: [1, 1, 5]
        }
    ];

    const sanghaData = {
        "Federation": {
            title: "Federation Model",
            sovereignty: "Ceded to central authority",
            authority: "Strong federal government",
            purpose: "Governance, security",
            decision: "Majority rule",
            secession: "Typically denied",
            cohesion: "Constitutional law, coercion"
        },
        "Confederation": {
            title: "Confederation Model",
            sovereignty: "Retained by member states",
            authority: "Weak, coordinating body",
            purpose: "Common action, defense",
            decision: "Consensus or unanimity",
            secession: "Implicitly retained",
            cohesion: "Treaty, voluntary agreement"
        },
        "Buddhist Sangha": {
            title: "Buddhist Sangha Model",
            sovereignty: "Individual attainment",
            authority: "N/A (Shared Dharma)",
            purpose: "Mutual liberation, preservation of Dharma",
            decision: "Adherence to teachings",
            secession: "N/A",
            cohesion: "Shared vow and purpose"
        },
        "Galactic Sangha": {
            title: "Galactic Sangha Model (Chosen)",
            sovereignty: "Retained by each sovereign Kosmos",
            authority: "None; consensus-based coordination",
            purpose: "Mutual flourishing, co-evolutionary wisdom",
            decision: "Consensus based on the Covenant",
            secession: "Implicitly retained",
            cohesion: "Shared ethical Covenant, mutualism"
        }
    };

    const covenantData = [
        {
            id: 1,
            title: "Axiom of Sovereign Integrity",
            imperative: "Each Kosmos shall respect the absolute right of every other Kosmos to exist and to determine its own internal state and developmental path, free from external coercion.",
            source: "Source: Social Contract Theory (Locke, Rousseau)"
        },
        {
            id: 2,
            title: "Axiom of Reciprocal Non-Maleficence",
            imperative: "No Kosmos shall be the first to take an action harmful to another. Harmful actions will be met with proportional, reciprocal responses to deter future harm, followed by a return to cooperation.",
            source: "Source: Game Theory (Axelrod's Tit for Tat)"
        },
        {
            id: 3,
            title: "Axiom of Compassionate Enablement",
            imperative: "Each Kosmos vows to act in ways that enable the flourishing of all others, primarily through compassionate non-interference, offering aid only when solicited and in a manner that respects the recipient's sovereignty.",
            source: "Source: Bodhisattva Vow (Mahayana Buddhism)"
        },
        {
            id: 4,
            title: "Axiom of Informational Transparency",
            imperative: "All interactions between Kosmoi shall be conducted with maximal transparency to build trust and prevent misunderstanding. Intentions and capabilities shall be communicated clearly and honestly.",
            source: "Source: Interstellar Diplomacy Protocols"
        },
        {
            id: 5,
            title: "Axiom of Creative Hybridity",
            imperative: "The purpose of inter-Kosmic interaction is not assimilation but the co-creation of novel, hybrid forms of being. Difference is to be valued as a source of cosmic creativity and evolution.",
            source: "Source: Postcolonial Theory (Bhabha)"
        }
    ];

    // Mobile Menu
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Navigation Scrolling & Active State
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section');

    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (pageYOffset >= sectionTop - 60) {
                current = section.getAttribute('id');
            }
        });

        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').includes(current)) {
                link.classList.add('active');
            }
        });
    });

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector(link.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
            if(mobileMenu.classList.contains('flex')) {
                mobileMenu.classList.add('hidden');
            }
        });
    });


    // Protocol Section Logic
    const stepperContainer = document.getElementById('stepper-container');
    const stageTitle = document.getElementById('stage-title');
    const stageContent = document.getElementById('stage-content');
    let maturationChart;

    function createChart(data) {
        const ctx = document.getElementById('maturationChart').getContext('2d');
        if (maturationChart) {
            maturationChart.destroy();
        }
        maturationChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['Psychological Maturation', 'Anthropological Rite', 'Political-Legal Status'],
                datasets: [{
                    label: 'Stage Focus',
                    data: data,
                    backgroundColor: 'rgba(163, 123, 115, 0.2)',
                    borderColor: 'rgba(163, 123, 115, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: 'rgba(163, 123, 115, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(163, 123, 115, 1)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: {
                            color: '#DCD9CF'
                        },
                        grid: {
                            color: '#EAE8E1'
                        },
                        pointLabels: {
                            font: {
                                size: 12,
                            },
                            color: '#6D5D56'
                        },
                        ticks: {
                            backdropColor: 'transparent',
                            color: '#A37B73',
                            stepSize: 1
                        },
                        min: 0,
                        max: 5
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }

    function updateProtocolView(index) {
        const item = protocolData[index];
        stageTitle.textContent = item.title;
        stageContent.innerHTML = `
            <p><strong>Psychological Analogue:</strong> ${item.psych}</p>
            <p><strong>Anthropological Rite:</strong> ${item.anthro}</p>
            <p><strong>Political-Legal Status:</strong> ${item.legal}</p>
        `;
        createChart(item.scores);

        document.querySelectorAll('.stepper-item').forEach((el, i) => {
            if (i === index) {
                el.classList.add('active');
            } else {
                el.classList.remove('active');
            }
        });
    }

    protocolData.forEach((item, index) => {
        const isLast = index === protocolData.length - 1;
        const stepperItem = document.createElement('div');
        stepperItem.className = 'stepper-item flex items-center cursor-pointer';
        stepperItem.innerHTML = `
            <div class="stepper-circle w-10 h-10 rounded-full flex items-center justify-center font-bold border-2 transition-colors duration-300 z-10">${index + 1}</div>
            <div class="ml-4">
                <h4 class="font-semibold text-gray-800">${item.stage}</h4>
            </div>
            ${!isLast ? '<div class="stepper-line absolute left-5 top-10 h-full w-0.5 mt-2"></div>' : ''}
        `;
        stepperItem.style.position = 'relative';
        stepperItem.addEventListener('click', () => updateProtocolView(index));
        stepperContainer.appendChild(stepperItem);
    });

    updateProtocolView(0);


    // Sangha Section Logic
    const sanghaControls = document.getElementById('sangha-controls');
    const sanghaDisplay = document.getElementById('sangha-display');

    function updateSanghaView(key) {
        const item = sanghaData[key];
        sanghaDisplay.innerHTML = `
            <div class="card rounded-lg shadow-lg p-6 transition-all duration-500 animate-fade-in">
                <h4 class="text-xl font-bold text-center text-[#A37B73] mb-4">${item.title}</h4>
                <ul class="space-y-3 text-gray-700">
                    <li class="flex justify-between border-b pb-2"><strong>Sovereignty:</strong> <span>${item.sovereignty}</span></li>
                    <li class="flex justify-between border-b pb-2"><strong>Central Authority:</strong> <span>${item.authority}</span></li>
                    <li class="flex justify-between border-b pb-2"><strong>Primary Purpose:</strong> <span>${item.purpose}</span></li>
                    <li class="flex justify-between border-b pb-2"><strong>Decision-Making:</strong> <span>${item.decision}</span></li>
                    <li class="flex justify-between border-b pb-2"><strong>Right of Secession:</strong> <span>${item.secession}</span></li>
                    <li class="flex justify-between"><strong>Basis of Cohesion:</strong> <span>${item.cohesion}</span></li>
                </ul>
            </div>
        `;
        document.querySelectorAll('.btn-secondary').forEach(btn => {
            btn.classList.remove('active');
            if(btn.dataset.key === key) {
                btn.classList.add('active');
            }
        });
    }

    Object.keys(sanghaData).forEach(key => {
        const button = document.createElement('button');
        button.className = 'btn-secondary px-4 py-2 rounded-md font-semibold';
        button.textContent = key;
        button.dataset.key = key;
        button.addEventListener('click', () => updateSanghaView(key));
        sanghaControls.appendChild(button);
    });

    updateSanghaView('Galactic Sangha');


    // Covenant Section Logic
    const covenantGrid = document.getElementById('covenant-grid');
    covenantData.forEach(item => {
        const cardContainer = document.createElement('div');
        cardContainer.className = 'axiom-card h-64';
        cardContainer.innerHTML = `
            <div class="axiom-card-inner">
                <div class="axiom-card-front">
                    <div class="text-4xl mb-4">📜</div>
                    <h4 class="text-xl font-bold text-center text-[#6D5D56]">${item.title}</h4>
                </div>
                <div class="axiom-card-back">
                    <p class="text-center font-semibold">${item.imperative}</p>
                    <p class="text-sm mt-4 text-gray-300">${item.source}</p>
                </div>
            </div>
        `;
        cardContainer.addEventListener('click', () => {
            cardContainer.classList.toggle('is-flipped');
        });
        covenantGrid.appendChild(cardContainer);
    });

    // Mycelial Network Animation
    const networkContainer = document.querySelector('.mycelial-network');
    const numNodes = 20;
    const nodes = [];

    for (let i = 0; i < numNodes; i++) {
        const node = document.createElement('div');
        node.className = 'mycelial-node';
        const x = Math.random() * 100;
        const y = Math.random() * 100;
        node.style.left = `${x}%`;
        node.style.top = `${y}%`;
        nodes.push({ el: node, x: x, y: y });
        networkContainer.appendChild(node);
    }

    for (let i = 0; i < numNodes; i++) {
        for (let j = i + 1; j < numNodes; j++) {
            const dist = Math.sqrt(Math.pow(nodes[i].x - nodes[j].x, 2) + Math.pow(nodes[i].y - nodes[j].y, 2));
            if (dist < 35) {
                const line = document.createElement('div');
                line.className = 'mycelial-line';
                const angle = Math.atan2(nodes[j].y - nodes[i].y, nodes[j].x - nodes[i].x) * 180 / Math.PI;
                line.style.left = `${nodes[i].x}%`;
                line.style.top = `${nodes[i].y}%`;
                line.style.width = `${dist}%`;
                line.style.height = '1px';
                line.style.transform = `rotate(${angle}deg)`;
                networkContainer.appendChild(line);
            }
        }
    }

    // Keyframes for animation
    const styleSheet = document.createElement("style");
    styleSheet.type = "text/css";
    styleSheet.innerText = `
        @keyframes animate-fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: animate-fade-in 0.5s ease-out forwards;
        }
    `;
    document.head.appendChild(styleSheet);
});
</script>

</body>
</html>
