# v1.1 Troubleshooting Guide

## üö® Common Issues and Solutions

### TUI Won't Start

#### Problem: `ModuleNotFoundError: No module named 'textual'`
**Solution**:
```bash
# Make sure you're in nix develop
nix develop

# Install TUI dependencies
poetry install -E tui
```

#### Problem: TUI starts but crashes immediately
**Solution**:
```bash
# Check terminal compatibility
echo $TERM

# If not set properly:
export TERM=xterm-256color

# Try again
poetry run nix-tui
```

#### Problem: Unicode/emoji display issues
**Solution**:
- Ensure your terminal supports UTF-8
- Try a different terminal (Alacritty, Kitty, WezTerm)
- Disable emoji in settings: `ask-nix settings set emoji false`

### Voice Interface Issues

#### Problem: `No module named 'whisper'`
**Solution**:
```bash
poetry install -E voice
```

#### Problem: Microphone not detected
**Solution**:
```bash
# Check audio devices
arecord -l

# Test microphone
arecord -d 5 test.wav && aplay test.wav
```

#### Problem: Wake word not responding
**Solution**:
- Speak clearly and at normal volume
- Say "Hey Nix" with a brief pause after
- Check background noise levels

### Performance Issues

#### Problem: TUI feels sluggish
**Solution**:
```bash
# Enable native Python backend
export LUMINOUS_NIX_PYTHON_BACKEND=true

# Check system resources
htop
```

#### Problem: Commands timing out
**Solution**:
- The native backend should prevent this
- If it still happens, check network connectivity
- Try simpler commands first

### Backend Connection Issues

#### Problem: "Cannot connect to backend"
**Solution**:
```bash
# Test backend directly
python3 -c "from nix_humanity.core.backend import NixForHumanityBackend; print('Backend OK')"

# Check for port conflicts
netstat -tulpn | grep 8080
```

### Display Issues

#### Problem: Colors look wrong
**Solution**:
```bash
# Check color support
tput colors

# Should show 256, if not:
export COLORTERM=truecolor
```

#### Problem: Layout broken/overlapping
**Solution**:
- Resize terminal to at least 80x24
- Try fullscreen mode
- Update terminal emulator

## üîß Debug Mode

Run TUI with debug output:
```bash
LUMINOUS_NIX_DEBUG=1 poetry run nix-tui
```

Check logs:
```bash
tail -f ~/.local/share/nix-humanity/logs/tui.log
```

## üÜò Emergency Fixes

### Reset All Settings
```bash
rm -rf ~/.config/nix-humanity
rm -rf ~/.local/share/nix-humanity
```

### Force CLI Mode
```bash
LUMINOUS_NIX_FORCE_CLI=1 ask-nix "your command"
```

### Reinstall Dependencies
```bash
poetry install --remove-untracked
poetry install -E tui -E voice
```

## üìä System Requirements Check

Run this script to verify your system:
```bash
python3 scripts/test-tui-startup.py
```

## üêõ Reporting Issues

If none of these solutions work:

1. **Gather Information**:
   ```bash
   nix-info
   poetry --version
   python --version
   echo $TERM
   ```

2. **Create Issue**: https://github.com/Luminous-Dynamics/luminous-nix/issues

3. **Include**:
   - Error message (full traceback)
   - Steps to reproduce
   - System information
   - What you've already tried

## üí° Pro Tips

1. **Best Terminals for TUI**:
   - Alacritty (recommended)
   - Kitty
   - WezTerm
   - iTerm2 (macOS)

2. **Optimal Settings**:
   - Font: Monospace with emoji support
   - Size: At least 80x24, prefer 120x40
   - Colors: 256 or true color

3. **Performance Tuning**:
   ```bash
   # In ~/.config/nix-humanity/config.yaml
   performance:
     animation_fps: 30  # Lower if sluggish
     cache_size: 1000   # Increase for more caching
   ```

## üåü Known Limitations (Beta)

- Voice may not work in all environments
- Some terminals may have rendering issues
- Animations might stutter on slower systems
- Not all CLI features exposed in TUI yet

These will be addressed before final v1.1 release!

---

**Still stuck?** Join our Discord or create an issue. We're here to help! üôè
