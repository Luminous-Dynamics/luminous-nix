# ü§ñ AI Environment Architect

*Natural language to Nix flake generation for AI/ML development environments*

## Overview

The AI Environment Architect is a powerful feature of Luminous Nix that automatically generates sophisticated `flake.nix` files for AI and machine learning development environments based on natural language descriptions.

## Features

### üéØ Intelligent Requirement Analysis
- Detects AI/ML frameworks from natural language
- Automatically determines CUDA/GPU requirements
- Estimates memory requirements
- Identifies stable vs experimental packages

### üì¶ Multi-Tier Package Support
- **Stable Tier**: Pure Nix packages (transformers, TensorFlow, scikit-learn)
- **Experimental Tier**: Hybrid Nix + pip approach (llama-cpp, langchain, whisper)

### üõ°Ô∏è Built-in Best Practices
- License warnings for commercial use
- Automatic virtual environment setup for pip packages
- Development tools included (git, editors, monitoring)
- Security-conscious defaults

### üöÄ Zero Configuration
- Generates complete, working environments
- Includes comprehensive README files
- Example notebooks for quick starts
- Shell hooks for automatic setup

## Usage

### Standalone Command

```bash
# Interactive mode
ask-nix-ai-env

# Direct request
ask-nix-ai-env "Create a PyTorch environment with CUDA support"

# With options
ask-nix-ai-env --preview "I want to run Llama locally"
ask-nix-ai-env --output ./my-ml-project "Set up TensorFlow"
```

### Integrated with ask-nix

```bash
# Coming soon: Direct integration
ask-nix "Create an AI environment for stable diffusion"
ask-nix "Set up a Jupyter notebook for data science"
```

## Examples

### 1. Local LLM Development

**Request**: "I want to run Llama 2 locally with CUDA"

**Generated Environment**:
- llama-cpp-python via pip
- CUDA toolkit and cuDNN
- 16GB RAM recommendation
- Automatic model directory setup

### 2. Data Science Workspace

**Request**: "Jupyter notebook for machine learning with pandas"

**Generated Environment**:
- Jupyter, pandas, scikit-learn, matplotlib
- Pure Nix packages (no pip needed)
- Integrated notebook kernel
- Example notebooks included

### 3. Computer Vision Project

**Request**: "Stable diffusion environment for art generation"

**Generated Environment**:
- Diffusers library via pip
- CUDA support included
- License warnings displayed
- Optimized for GPU inference

### 4. NLP Research

**Request**: "Transformers with PyTorch for NLP research"

**Generated Environment**:
- Hugging Face transformers
- PyTorch with CUDA
- Development tools
- Monitoring utilities (nvtop)

## Generated Files

### flake.nix
```nix
{
  description = "AI/ML Development Environment - Generated by Luminous Nix";
  
  inputs = {
    nixpkgs.url = "github:NixOS/nixpkgs/nixos-unstable";
    flake-utils.url = "github:numtide/flake-utils";
  };
  
  outputs = { self, nixpkgs, flake-utils }:
    flake-utils.lib.eachDefaultSystem (system:
      let
        pkgs = nixpkgs.legacyPackages.${system};
        pythonEnv = pkgs.python311.withPackages (ps: with ps; [
          # Your packages here
        ]);
      in
      {
        devShells.default = pkgs.mkShell {
          buildInputs = with pkgs; [
            pythonEnv
            # Additional tools
          ];
          
          shellHook = ''
            echo "ü§ñ AI/ML Development Environment"
            # Automatic setup
          '';
        };
      }
    );
}
```

### README.md
- Quick start instructions
- What's included
- System requirements
- Example code snippets
- Troubleshooting guide

### .gitignore
- ML-specific ignores (models/, checkpoints/, etc.)
- Python ignores
- Data directories

### .envrc
- direnv integration for automatic activation

## Architecture

### Components

1. **AIEnvironmentArchitect** (`ai_environment_architect.py`)
   - Core logic for requirement analysis
   - Flake template generation
   - Model requirement database

2. **AIEnvironmentIntegration** (`ai_environment_integration.py`)
   - Natural language pattern matching
   - Response formatting
   - Integration with ask-nix

3. **AIEnvironmentGenerator** (`ai_environment_generator.py`)
   - File creation and validation
   - Example notebook generation
   - Environment tracking

### Model Database

#### Stable Models (Pure Nix)
- **transformers**: Hugging Face ecosystem
- **tensorflow**: Deep learning framework
- **scikit-learn**: Traditional ML
- **jupyter**: Interactive notebooks

#### Experimental Models (Nix + pip)
- **llama-cpp**: Local LLM inference
- **langchain**: LLM application framework
- **whisper**: Speech recognition
- **stable-diffusion**: Image generation

## Best Practices

### For Users
1. Be specific about GPU needs ("with CUDA" or "CPU only")
2. Mention specific models or frameworks
3. Include project type for better tool selection
4. Check generated README for important warnings

### For Developers
1. Extend model database in `ai_environment_architect.py`
2. Add new patterns to `environment_patterns` list
3. Test with `demo-ai-environments.py`
4. Update this documentation

## Testing

```bash
# Run test suite
cd scripts/test
./test-ai-environments.sh

# Run demo
cd scripts/demo
python3 demo-ai-environments.py
```

## Future Enhancements

- [ ] Direct integration with ask-nix main command
- [ ] Cloud provider templates (AWS, GCP, Azure)
- [ ] Docker/OCI container generation
- [ ] Multi-language support (R, Julia)
- [ ] Distributed training configurations
- [ ] Model serving templates
- [ ] CI/CD pipeline generation

## Privacy & Ethics

- All processing happens locally
- No telemetry or usage tracking
- License warnings for restricted models
- Ethical AI usage guidelines included

## Contributing

To add new models or frameworks:

1. Add to `model_requirements` in `ai_environment_architect.py`
2. Update pattern matching if needed
3. Add examples to demo script
4. Test thoroughly
5. Update documentation

## License

Part of Luminous Nix - Making NixOS accessible to everyone through natural language.

---

*"From natural language to production-ready AI environments in seconds."*