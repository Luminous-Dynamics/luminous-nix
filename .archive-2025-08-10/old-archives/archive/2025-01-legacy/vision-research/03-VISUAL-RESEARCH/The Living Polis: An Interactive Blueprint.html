<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Living Polis: An Interactive Blueprint</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: A single-page application with a fixed top navigation bar allowing users to jump to four distinct, thematic sections. Each section corresponds to one of the report's core refinements. This non-linear, dashboard-like structure was chosen to make the dense, interconnected concepts digestible by allowing users to focus on one area at a time. Interactions within each section (clickable diagrams, interactive charts, and tabbed content) are designed to transform passive reading into active exploration, which is essential for understanding such abstract, philosophical material. The goal is to reveal the "symphony" by letting the user play with each "instrument" individually. -->
    <!-- Visualization & Content Choices:
        - The Incarnation Problem: Report Info -> "Path of the Seeker" onboarding. Goal -> Explain a process. Viz/Method -> Interactive HTML/CSS step-by-step diagram. Interaction -> Clicking a step highlights it and reveals its detailed description. Justification -> A visual, interactive flow is more intuitive than text for explaining a user journey. Library/Method -> Vanilla JS and Tailwind CSS.
        - The Paradox of Redemption: Report Info -> WIS Time-Decay and Ceremony of Forgiveness. Goal -> Show change over time and explain a process. Viz/Method -> An interactive line chart for time-decay and a clickable process diagram for the ceremony. Interaction -> A slider on the chart manipulates time to show its effect on reputation. Clicking ceremony steps reveals details. Justification -> Makes the abstract concept of reputational decay tangible and clarifies the restorative justice process. Library/Method -> Chart.js, Vanilla JS.
        - The Shadow of Virtue: Report Info -> Comparing incentive models. Goal -> Compare two concepts. Viz/Method -> An interactive bar chart. Interaction -> Buttons toggle between motivational dimensions, updating the chart and explanatory text. Justification -> A dynamic chart provides a clearer, more engaging comparison than a static table. Library/Method -> Chart.js, Vanilla JS.
        - The Oracle's Dilemma: Report Info -> AI Governance Models. Goal -> Organize and compare complex information. Viz/Method -> A tabbed content area and a simple HTML/CSS feedback loop diagram. Interaction -> Clicking tabs reveals details for each governance model. Justification -> Tabs are a standard, space-efficient UI for comparing multiple items. The diagram clarifies the novel feedback loop. Library/Method -> Vanilla JS, Tailwind CSS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #292524; /* stone-800 */
        }
        .nav-button {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-button.active, .nav-button:hover {
            color: #0d9488; /* teal-600 */
            border-bottom-color: #0d9488;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .interactive-step {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .interactive-step.active {
            background-color: #ccfbf1; /* teal-100 */
            border-left-color: #0d9488; /* teal-600 */
            transform: scale(1.02);
        }
        .tab-button {
            transition: all 0.2s ease;
        }
        .tab-button.active {
            background-color: #0d9488; /* teal-600 */
            color: white;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-stone-800">The Living Polis</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button data-target="introduction" class="nav-button active px-3 py-2 rounded-md text-sm font-medium text-stone-600">Introduction</button>
                        <button data-target="seeker" class="nav-button px-3 py-2 rounded-md text-sm font-medium text-stone-600">The Seeker</button>
                        <button data-target="redemption" class="nav-button px-3 py-2 rounded-md text-sm font-medium text-stone-600">Redemption</button>
                        <button data-target="virtue" class="nav-button px-3 py-2 rounded-md text-sm font-medium text-stone-600">Virtue</button>
                        <button data-target="oracle" class="nav-button px-3 py-2 rounded-md text-sm font-medium text-stone-600">The Oracle</button>
                    </div>
                </div>
                 <div class="md:hidden">
                    <select id="mobile-nav" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500 sm:text-sm">
                        <option value="introduction">Introduction</option>
                        <option value="seeker">The Seeker</option>
                        <option value="redemption">Redemption</option>
                        <option value="virtue">Virtue</option>
                        <option value="oracle">The Oracle</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">

        <!-- Introduction Section -->
        <section id="introduction" class="content-section active">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-3xl font-bold tracking-tight text-stone-900 sm:text-4xl">Harmonies and Crescendos</h2>
                <p class="mt-4 text-lg text-stone-600">This interactive blueprint explores four key refinements to a "Living Polis"â€”a socio-technical ecosystem designed to foster human development. The original work is a symphony of ideas, weaving together philosophy, economics, and technology. This application serves as an interactive score, allowing you to explore each movement and understand how they create a more resilient, humane, and living system.</p>
            </div>
            <div class="mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-4">
                <div class="bg-white p-6 rounded-lg shadow-md border border-stone-200">
                    <h3 class="font-semibold text-lg text-teal-700">The Incarnation Problem</h3>
                    <p class="mt-2 text-sm text-stone-600">How do we translate profound philosophy into an inviting, lived experience for newcomers? Addressed by the "Path of the Seeker."</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-stone-200">
                    <h3 class="font-semibold text-lg text-amber-700">The Paradox of Redemption</h3>
                    <p class="mt-2 text-sm text-stone-600">How can a system with an immutable record allow for growth, change, and forgiveness? Addressed by the "Ceremony of Forgiveness."</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-stone-200">
                    <h3 class="font-semibold text-lg text-sky-700">The Shadow of Virtue</h3>
                    <p class="mt-2 text-sm text-stone-600">Does monetizing pro-social behavior risk corrupting intrinsic altruism? Addressed by the "Unseen Gift Protocol."</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-stone-200">
                    <h3 class="font-semibold text-lg text-rose-700">The Oracle's Dilemma</h3>
                    <p class="mt-2 text-sm text-stone-600">How do we govern the AI partners intended to be tools of liberation? Addressed by the "AI's Covenant & Asimov Council."</p>
                </div>
            </div>
        </section>

        <!-- Path of the Seeker Section -->
        <section id="seeker" class="content-section">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold tracking-tight text-teal-700">Refinement 1: The Path of the Seeker</h2>
                <p class="mt-4 text-lg text-stone-600">This refinement solves the "Incarnation Problem": the challenge of making the system's deep philosophy accessible to newcomers. Instead of a manual, it creates a guided, experiential journey. This section visualizes that journey, where understanding follows action, guided by a Socratic AI "Doula."</p>
            </div>
            <div class="mt-12 md:grid md:grid-cols-2 md:gap-12 items-start">
                <div class="flex flex-col space-y-4">
                    <div id="step-1" class="interactive-step p-4 rounded-lg border-l-4 border-stone-300 bg-white shadow-sm" onclick="selectStep(1)">
                        <h4 class="font-bold">1. Concrete Experience</h4>
                        <p class="text-sm">The Seeker performs a "First Sacred Act," a small, simple task.</p>
                    </div>
                    <div class="self-center text-2xl text-stone-400">â†“</div>
                    <div id="step-2" class="interactive-step p-4 rounded-lg border-l-4 border-stone-300 bg-white shadow-sm" onclick="selectStep(2)">
                        <h4 class="font-bold">2. Reflective Observation</h4>
                        <p class="text-sm">The Seeker observes the immediate consequence of their action in the system.</p>
                    </div>
                     <div class="self-center text-2xl text-stone-400">â†“</div>
                    <div id="step-3" class="interactive-step p-4 rounded-lg border-l-4 border-stone-300 bg-white shadow-sm" onclick="selectStep(3)">
                        <h4 class="font-bold">3. Abstract Conceptualization</h4>
                        <p class="text-sm">The AI Doula connects the action to a core philosophical principle.</p>
                    </div>
                     <div class="self-center text-2xl text-stone-400">â†“</div>
                    <div id="step-4" class="interactive-step p-4 rounded-lg border-l-4 border-stone-300 bg-white shadow-sm" onclick="selectStep(4)">
                        <h4 class="font-bold">4. Active Experimentation</h4>
                        <p class="text-sm">The Seeker is invited to the next guided act, beginning the cycle anew.</p>
                    </div>
                </div>
                <div id="step-details" class="mt-8 md:mt-0 p-6 bg-white rounded-lg shadow-lg border border-stone-200 min-h-[300px]">
                    <!-- Details will be populated by JS -->
                </div>
            </div>
        </section>

        <!-- Paradox of Redemption Section -->
        <section id="redemption" class="content-section">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold tracking-tight text-amber-700">Refinement 2: The Paradox of Redemption</h2>
                <p class="mt-4 text-lg text-stone-600">This refinement tackles the tension between an immutable ledger and the human need for growth and forgiveness. It introduces two mechanisms: an algorithmic "time-decay" for reputation and a cultural "Ceremony of Forgiveness" for profound reconciliation, architecting redemption into the system's physics.</p>
            </div>
            <div class="mt-12 grid md:grid-cols-2 gap-12">
                <div>
                    <h3 class="text-xl font-semibold text-center mb-4">WIS Time-Decay</h3>
                    <p class="text-sm text-stone-600 text-center mb-4">This chart demonstrates how the negative impact of a past transgression on a member's Wisdom (WIS) score diminishes over time, allowing for "reputational bankruptcy." Use the slider to see the effect.</p>
                    <div class="chart-container">
                        <canvas id="redemptionChart"></canvas>
                    </div>
                    <div class="mt-4 px-4">
                        <label for="timeSlider" class="block text-sm font-medium text-gray-700">Years Passed: <span id="timeValue">1</span></label>
                        <input id="timeSlider" type="range" min="0" max="10" value="1" step="0.5" class="w-full h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-center mb-4">Ceremony of Forgiveness</h3>
                     <p class="text-sm text-stone-600 text-center mb-4">For significant breaches, this high-friction process based on restorative justice allows for true repair. Click each step to learn more.</p>
                    <div class="flex flex-col space-y-2">
                        <div class="p-3 rounded-lg bg-white shadow-sm border border-stone-200"><strong>1. Acknowledgment:</strong> A clear admission of the harm caused.</div>
                        <div class="p-3 rounded-lg bg-white shadow-sm border border-stone-200"><strong>2. Restitution:</strong> A plan for a "Sacred Act" aimed at repairing the harm.</div>
                        <div class="p-3 rounded-lg bg-white shadow-sm border border-stone-200"><strong>3. Witnessing:</strong> The community formally witnesses the acknowledgment and commitment.</div>
                        <div class="p-3 rounded-lg bg-white shadow-sm border border-stone-200"><strong>4. Integration:</strong> The event's negative impact is formally reduced, and the ceremony is recorded.</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Shadow of Virtue Section -->
        <section id="virtue" class="content-section">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold tracking-tight text-sky-700">Refinement 3: The Shadow of Virtue</h2>
                <p class="mt-4 text-lg text-stone-600">This refinement addresses the risk of "crowding out" intrinsic motivation. If every good deed is rewarded, does it cease to be kindness and become a transaction? The "Unseen Gift" Protocol creates a protected space for pure, unrewarded altruism, acting as a crucial cultural and economic counterbalance.</p>
            </div>
            <div class="mt-12">
                <div class="text-center mb-6">
                    <div class="inline-flex rounded-md shadow-sm" role="group">
                        <button type="button" id="btn-autonomy" class="virtue-btn active px-4 py-2 text-sm font-medium text-white bg-sky-600 border border-sky-600 rounded-l-lg">Autonomy</button>
                        <button type="button" id="btn-crowding" class="virtue-btn px-4 py-2 text-sm font-medium text-sky-900 bg-white border-t border-b border-sky-600 hover:bg-sky-100">Crowding-Out Risk</button>
                        <button type="button" id="btn-signal" class="virtue-btn px-4 py-2 text-sm font-medium text-sky-900 bg-white border border-sky-600 rounded-r-lg hover:bg-sky-100">Cultural Signal</button>
                    </div>
                </div>
                <div class="grid md:grid-cols-5 gap-8 items-center">
                    <div class="md:col-span-2">
                        <h3 id="virtue-title" class="text-xl font-semibold mb-2">Psychological Need: Autonomy</h3>
                        <p id="virtue-text" class="text-stone-600">Self-Determination Theory suggests that for intrinsic motivation to flourish, people need to feel they are the source of their own actions. The "Unseen Gift" protocol directly supports this need by giving users the choice to opt-out of a reward, affirming their action was self-determined.</p>
                    </div>
                    <div class="md:col-span-3">
                        <div class="chart-container">
                            <canvas id="virtueChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Oracle's Dilemma Section -->
        <section id="oracle" class="content-section">
             <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold tracking-tight text-rose-700">Refinement 4: The Oracle's Dilemma</h2>
                <p class="mt-4 text-lg text-stone-600">This refinement addresses a critical governance question: who governs the AI partners? To prevent them from becoming unaccountable "oracles," this model creates a transparent, community-driven process for the AI's evolution, treating its core principles as a co-owned constitutional charter.</p>
            </div>
            <div class="mt-12">
                <div class="grid md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-xl font-semibold mb-4">Governance by Dissonance</h3>
                        <p class="text-sm text-stone-600 mb-4">A novel feedback loop ensures the AI co-evolves with the community. It surfaces ethical edge cases proactively, making the system anti-fragile.</p>
                        <div class="space-y-4">
                            <div class="p-4 bg-white rounded-lg shadow-sm border border-stone-200">
                                <p>1. AI encounters a request that conflicts with its core principles (The "Covenant").</p>
                            </div>
                            <div class="text-center text-2xl text-stone-400">â†“</div>
                            <div class="p-4 bg-white rounded-lg shadow-sm border border-stone-200">
                                <p>2. The AI's internal "Dissonance Metric" rises, signaling ethical stress.</p>
                            </div>
                            <div class="text-center text-2xl text-stone-400">â†“</div>
                             <div class="p-4 bg-rose-100 rounded-lg shadow-sm border border-rose-200">
                                <p>3. High dissonance automatically triggers a review by the "Asimov Council," a human stewardship body.</p>
                            </div>
                             <div class="text-center text-2xl text-stone-400">â†“</div>
                             <div class="p-4 bg-white rounded-lg shadow-sm border border-stone-200">
                                <p>4. The Council deliberates and, if necessary, proposes an amendment to the AI's Covenant.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4">Comparative Governance Models</h3>
                        <div class="flex flex-wrap -mb-px border-b border-gray-200">
                            <button class="tab-button active" data-tab="asimov">Asimov Council</button>
                            <button class="tab-button" data-tab="corporate">Corporate Board</button>
                            <button class="tab-button" data-tab="dao">Token DAO</button>
                        </div>
                        <div class="bg-white p-6 rounded-b-lg rounded-r-lg shadow-md">
                            <div id="tab-asimov" class="tab-content">
                                <h4 class="font-bold text-lg">Asimov Council (Proposed)</h4>
                                <p class="text-sm mt-2"><strong>Power:</strong> Reputation-Holders, Developers, AI</p>
                                <p class="text-sm mt-1"><strong>Mechanism:</strong> Reputation-weighted deliberation on a living Covenant, triggered by AI Dissonance.</p>
                                <p class="text-sm mt-2"><strong class="text-green-600">Strengths:</strong> Meritocratic, community-driven, adaptive, transparent, anti-fragile.</p>
                                <p class="text-sm mt-1"><strong class="text-red-600">Weaknesses:</strong> Requires high community engagement; complexity in calibrating the Dissonance Metric.</p>
                            </div>
                            <div id="tab-corporate" class="tab-content hidden">
                                <h4 class="font-bold text-lg">Centralized Corporate Board</h4>
                                <p class="text-sm mt-2"><strong>Power:</strong> Developers / Company</p>
                                <p class="text-sm mt-1"><strong>Mechanism:</strong> Internal Ethics Committee.</p>
                                <p class="text-sm mt-2"><strong class="text-green-600">Strengths:</strong> Fast, decisive, clear accountability.</p>
                                <p class="text-sm mt-1"><strong class="text-red-600">Weaknesses:</strong> Opaque, risk of corporate capture, misaligned with community values.</p>
                            </div>
                            <div id="tab-dao" class="tab-content hidden">
                                <h4 class="font-bold text-lg">Token-Weighted DAO</h4>
                                <p class="text-sm mt-2"><strong>Power:</strong> Token Holders</p>
                                <p class="text-sm mt-1"><strong>Mechanism:</strong> On-chain voting based on token quantity.</p>
                                <p class="text-sm mt-2"><strong class="text-green-600">Strengths:</strong> Decentralized, transparent, automated.</p>
                                <p class="text-sm mt-1"><strong class="text-red-600">Weaknesses:</strong> Plutocratic (power follows wealth), vulnerable to speculation, low participation.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navButtons = document.querySelectorAll('.nav-button');
            const mobileNav = document.getElementById('mobile-nav');
            const sections = document.querySelectorAll('.content-section');

            function switchTab(targetId) {
                navButtons.forEach(button => {
                    if (button.dataset.target === targetId) {
                        button.classList.add('active');
                    } else {
                        button.classList.remove('active');
                    }
                });

                sections.forEach(section => {
                    if (section.id === targetId) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });

                if (mobileNav.value !== targetId) {
                    mobileNav.value = targetId;
                }
            }

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    switchTab(button.dataset.target);
                });
            });

            mobileNav.addEventListener('change', (e) => {
                switchTab(e.target.value);
            });

            // Seeker Section Logic
            const seekerSteps = document.querySelectorAll('.interactive-step');
            const stepDetailsContainer = document.getElementById('step-details');
            const stepDetailsContent = {
                1: { title: '1. Concrete Experience: The First Sacred Act', text: 'The journey begins not with reading, but with doing. The AI Doula invites the Seeker to perform a small, meaningful action, such as "Share one piece of knowledge that has been true and helpful for you." This grounds the experience in tangible participation from the very first click, applying principles of experiential learning.' },
                2: { title: '2. Reflective Observation: Seeing the Impact', text: 'Immediately after the act, the system provides feedback. The AI Doula might say, "You can see your contribution reflected in the first light of your WIS mandala." The Seeker observes their action made manifest, connecting their personal input to the collective system in a direct, observable way.' },
                3: { title: '3. Abstract Conceptualization: Naming the Act', text: 'With the experience grounded and observed, the Doula provides the philosophical framework. "What you just did was an act of Noesisâ€”sharing a clear truth. The community values this." This step gives the action a name and a meaning, translating the felt experience into the system\'s conceptual language.' },
                4: { title: '4. Active Experimentation: The Next Step', text: 'Having completed one full learning cycle, the Seeker is prepared for the next. The Doula invites them to a new Sacred Act, perhaps one focused on a different principle like Sophia or Praxis. This graduated journey builds understanding layer by layer, through direct experience rather than passive exposition.' }
            };

            window.selectStep = function(stepNum) {
                seekerSteps.forEach(step => step.classList.remove('active'));
                document.getElementById(`step-${stepNum}`).classList.add('active');

                const details = stepDetailsContent[stepNum];
                stepDetailsContainer.innerHTML = `<h3 class="text-lg font-bold text-teal-700">${details.title}</h3><p class="mt-4 text-stone-600">${details.text}</p>`;
            };
            selectStep(1); // Initialize with the first step

            // Redemption Chart Logic
            const redemptionCtx = document.getElementById('redemptionChart').getContext('2d');
            let redemptionChart;
            const timeSlider = document.getElementById('timeSlider');
            const timeValue = document.getElementById('timeValue');

            function createRedemptionChart(years) {
                const initialImpact = -100;
                const halfLife = 2; // years
                const data = Array.from({ length: 11 }, (_, i) => {
                    return i < years ? null : initialImpact * Math.pow(0.5, (i - years) / halfLife);
                });

                if (redemptionChart) {
                    redemptionChart.data.datasets[0].data = data;
                    redemptionChart.update();
                } else {
                    redemptionChart = new Chart(redemptionCtx, {
                        type: 'line',
                        data: {
                            labels: Array.from({ length: 11 }, (_, i) => `Year ${i}`),
                            datasets: [{
                                label: 'Negative Impact on WIS Score',
                                data: data,
                                borderColor: '#d97706', // amber-600
                                backgroundColor: '#fef3c7', // amber-100
                                fill: true,
                                tension: 0.3
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: false,
                                    max: 0,
                                    title: { display: true, text: 'Impact on Score' }
                                }
                            },
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `Impact: ${context.parsed.y.toFixed(2)}`;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            }

            timeSlider.addEventListener('input', (e) => {
                const years = parseFloat(e.target.value);
                timeValue.textContent = years;
                createRedemptionChart(years);
            });
            createRedemptionChart(1);

            // Virtue Chart Logic
            const virtueCtx = document.getElementById('virtueChart').getContext('2d');
            let virtueChart;
            const virtueData = {
                autonomy: {
                    title: 'Psychological Need: Autonomy',
                    text: 'Self-Determination Theory suggests that for intrinsic motivation to flourish, people need to feel they are the source of their own actions. The "Unseen Gift" protocol directly supports this need by giving users the choice to opt-out of a reward, affirming their action was self-determined.',
                    data: [3, 9],
                },
                crowding: {
                    title: 'Risk of Crowding-Out',
                    text: 'When an external reward (like points or money) is applied to an intrinsically motivated act (like helping someone), it can "crowd out" the original motivation. The "Unseen Gift" is a direct architectural defense against this risk.',
                    data: [8, 2],
                },
                signal: {
                    title: 'Cultural Signal',
                    text: 'The standard mechanism signals that helpful behavior is valued and rewarded. The "Unseen Gift" sends a more profound signal: that the community values and protects selfless giving, independent of any reward, strengthening the core of the gift economy.',
                    data: [6, 9],
                }
            };

            function createVirtueChart(dataset) {
                 if (virtueChart) {
                    virtueChart.destroy();
                }
                virtueChart = new Chart(virtueCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Standard Reward', 'Unseen Gift'],
                        datasets: [{
                            label: 'Score (out of 10)',
                            data: dataset,
                            backgroundColor: ['#a5b4fc', '#38bdf8'], // indigo-300, sky-400
                            borderColor: ['#6366f1', '#0ea5e9'], // indigo-500, sky-500
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 10
                            }
                        },
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            document.querySelectorAll('.virtue-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.target.id.split('-')[1];
                    const data = virtueData[id];
                    document.getElementById('virtue-title').textContent = data.title;
                    document.getElementById('virtue-text').textContent = data.text;
                    createVirtueChart(data.data);

                    document.querySelectorAll('.virtue-btn').forEach(btn => {
                        btn.classList.remove('active', 'bg-sky-600', 'text-white');
                        btn.classList.add('bg-white', 'text-sky-900', 'hover:bg-sky-100');
                    });
                    e.target.classList.add('active', 'bg-sky-600', 'text-white');
                    e.target.classList.remove('bg-white', 'text-sky-900', 'hover:bg-sky-100');
                });
            });
            createVirtueChart(virtueData.autonomy.data);


            // Oracle Tab Logic
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.dataset.tab;

                    tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.classList.remove('text-rose-600', 'border-rose-600');
                        btn.classList.add('text-stone-500', 'hover:text-stone-700', 'hover:border-stone-300');

                    });
                    button.classList.add('active');
                    button.classList.add('text-rose-600', 'border-rose-600');
                    button.classList.remove('text-stone-500', 'hover:text-stone-700', 'hover:border-stone-300');


                    tabContents.forEach(content => {
                        if (content.id === `tab-${targetTab}`) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });
            // Custom styles for Oracle tabs
            const style = document.createElement('style');
            style.textContent = `
                .tab-button {
                    padding: 0.5rem 1rem;
                    font-size: 0.875rem;
                    font-weight: 500;
                    border-bottom: 2px solid transparent;
                    margin-bottom: -1px;
                }
                .tab-button.active {
                    color: #e11d48; /* rose-600 */
                    border-color: #e11d48;
                }
            `;
            document.head.appendChild(style);


        });
    </script>
</body>
</html>
