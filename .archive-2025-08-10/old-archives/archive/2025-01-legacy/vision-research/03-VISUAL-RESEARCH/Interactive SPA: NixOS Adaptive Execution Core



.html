<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Report: NixOS Adaptive Execution Core</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: A tab-based SPA design is chosen for optimal information architecture. This structure breaks the dense technical report into logical, digestible sections: Overview, Adaptive Core, AI Engine, Learning Loop, and Roadmap. This non-linear approach allows users (e.g., technical leads, developers) to navigate directly to their area of interest without a long scroll, enhancing usability. Key interactions include tabbed navigation to switch between major concepts, hover/click events on diagrams to reveal detailed explanations, and a dynamic chart to visualize the project roadmap. This structure prioritizes user-driven exploration over a passive reading experience. -->
    <!-- Visualization & Content Choices:
        - Report Info: Unified Architecture (SOA+EDA). Goal: Inform. Viz: HTML/CSS diagram. Interaction: Hover to highlight components. Justification: Visually simplifies a complex concept. Method: Tailwind CSS.
        - Report Info: Key Recommendations. Goal: Inform. Viz: Card layout. Interaction: None. Justification: High scannability for executive summary. Method: Tailwind CSS.
        - Report Info: Strategy Design Pattern. Goal: Organize. Viz: HTML/CSS diagram. Interaction: Click to show details. Justification: Makes an abstract pattern concrete and interactive. Method: Tailwind CSS, JS.
        - Report Info: Technology Comparisons (Tables). Goal: Compare. Viz: Styled HTML tables. Interaction: Row hover highlight. Justification: Improves readability of dense data. Method: Tailwind CSS.
        - Report Info: Phased Roadmap. Goal: Change/Organize. Viz: Bar Chart & Accordion. Interaction: Click to expand phase details. Justification: Visualizes effort and provides progressive disclosure of information. Method: Chart.js, Tailwind CSS, JS.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab.active {
            border-bottom-color: #3B82F6;
            color: #1F2937;
        }
        .tab {
            border-bottom-color: transparent;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .diagram-box {
            transition: all 0.3s ease-in-out;
        }
        .diagram-box:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-stone-900">Architectural Blueprint</h1>
            <p class="text-lg text-stone-600 mt-2">An Interactive Exploration of the NixOS Adaptive Execution Core</p>
        </header>

        <nav class="border-b border-stone-200 mb-8">
            <ul class="flex flex-wrap -mb-px text-sm font-medium text-center text-stone-500">
                <li class="mr-2">
                    <button class="tab inline-block p-4 border-b-2 rounded-t-lg active" data-tab="overview">
                        <span class="hidden sm:inline">üöÄ</span> Overview
                    </button>
                </li>
                <li class="mr-2">
                    <button class="tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="core">
                        <span class="hidden sm:inline">üß†</span> Adaptive Core
                    </button>
                </li>
                <li class="mr-2">
                    <button class="tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="ai">
                        <span class="hidden sm:inline">üõ†Ô∏è</span> AI Engine
                    </button>
                </li>
                <li class="mr-2">
                    <button class="tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="learning">
                        <span class="hidden sm:inline">üìà</span> Learning Loop
                    </button>
                </li>
                <li>
                    <button class="tab inline-block p-4 border-b-2 rounded-t-lg" data-tab="roadmap">
                        <span class="hidden sm:inline">üó∫Ô∏è</span> Roadmap
                    </button>
                </li>
            </ul>
        </nav>

        <main>
            <!-- Overview Section -->
            <section id="overview" class="content-section active">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold mb-4">Executive Summary & Strategic Framework</h2>
                    <p class="text-stone-600 mb-6">This interactive report translates the technical blueprint for a NixOS-based adaptive execution core into an explorable format. The architecture is founded on a capability-aware core, a multi-tiered AI engine, and a decoupled learning loop. This application allows you to dive into each component, understand the technology choices, and visualize the implementation plan.</p>

                    <h3 class="text-xl font-semibold mb-4">Core Recommendations</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        <div class="bg-stone-100 p-4 rounded-lg">
                            <h4 class="font-bold text-stone-800">1. Formalize the Core</h4>
                            <p class="text-sm text-stone-600">Implement the "Capability-Aware" core using the **Strategy design pattern** for a formal, testable, and extensible structure.</p>
                        </div>
                        <div class="bg-stone-100 p-4 rounded-lg">
                            <h4 class="font-bold text-stone-800">2. Hybrid AI System</h4>
                            <p class="text-sm text-stone-600">Architect the "Non-LLM AI Arsenal" as a **hybrid NLP system**, combining rule-based matching with semantic search.</p>
                        </div>
                        <div class="bg-stone-100 p-4 rounded-lg">
                            <h4 class="font-bold text-stone-800">3. Decouple Learning</h4>
                            <p class="text-sm text-stone-600">Implement the "Digital Twin" learning loop **asynchronously** to preserve UI responsiveness.</p>
                        </div>
                        <div class="bg-stone-100 p-4 rounded-lg">
                            <h4 class="font-bold text-stone-800">4. Nix-Native Distribution</h4>
                            <p class="text-sm text-stone-600">Use native Nixpkgs builders (`buildPythonApplication`) for packaging, avoiding tools like `pyinstaller`.</p>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Unified Architectural Vision</h3>
                    <p class="text-stone-600 mb-4">The architecture synthesizes two powerful paradigms: Service-Oriented Architecture (SOA) and Event-Driven Architecture (EDA). This creates a system of well-defined, capability-based services that communicate and evolve through asynchronous events. Hover over the diagram components to learn more.</p>
                    <div class="border rounded-lg p-6 bg-white">
                        <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                            <div class="diagram-box text-center p-4 border-2 border-blue-500 rounded-lg bg-blue-50 w-full md:w-1/3" data-info="SOA promotes loosely coupled, self-contained services. Here, each AI tier is a distinct service with a clear function, promoting reuse and simplifying the system.">
                                <h4 class="font-bold text-blue-800">Service-Oriented Architecture (SOA)</h4>
                                <p class="text-sm text-blue-700 mt-1">AI Tiers as Services</p>
                            </div>
                            <div class="text-4xl font-mono text-stone-400">+</div>
                            <div class="diagram-box text-center p-4 border-2 border-purple-500 rounded-lg bg-purple-50 w-full md:w-1/3" data-info="EDA enables asynchronous communication. The learning loop is a prime example, where the main app publishes 'interaction events' and a separate process consumes them to update models without blocking the UI.">
                                <h4 class="font-bold text-purple-800">Event-Driven Architecture (EDA)</h4>
                                <p class="text-sm text-purple-700 mt-1">Asynchronous Learning Loop</p>
                            </div>
                        </div>
                        <div id="diagram-info-box" class="mt-4 p-4 bg-stone-100 rounded-lg text-center text-stone-700 h-24 flex items-center justify-center">
                            <p>Hover over a box to see its description.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Adaptive Core Section -->
            <section id="core" class="content-section">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold mb-4">The Capability-Aware Core</h2>
                    <p class="text-stone-600 mb-6">A core requirement is for the application to adapt its behavior based on the runtime environment (e.g., available RAM, CPU, model files). This is formalized using the **Strategy Design Pattern**, which provides a robust and extensible way to select an algorithm's behavior at runtime. Click on the diagram components to explore the pattern.</p>

                    <div class="border rounded-lg p-6 bg-white">
                        <div class="flex flex-col md:flex-row items-stretch justify-around gap-4 text-center">
                            <div class="strategy-component p-4 border rounded-lg cursor-pointer diagram-box w-full md:w-1/4" data-title="Context (Core Loop)" data-desc="The main application loop. It holds a reference to a Strategy object but is unaware of the specific implementation. It simply calls a method like 'process_input()'.">
                                <h4 class="font-semibold">Context</h4>
                                <p class="text-sm text-stone-500">Core Loop</p>
                            </div>
                            <div class="flex items-center justify-center text-2xl font-mono text-stone-400">&rarr;</div>
                             <div class="strategy-component p-4 border rounded-lg cursor-pointer diagram-box w-full md:w-1/4" data-title="Strategy Interface" data-desc="An abstract class defining the common interface for all algorithms (e.g., 'process_input(text)'). This ensures the Context can treat all Concrete Strategies interchangeably.">
                                <h4 class="font-semibold">Strategy Interface</h4>
                                <p class="text-sm text-stone-500">`process_input()`</p>
                            </div>
                            <div class="flex items-center justify-center text-2xl font-mono text-stone-400">&darr;</div>
                            <div class="w-full md:w-1/3 flex flex-col gap-2">
                                <div class="strategy-component p-2 border rounded-lg cursor-pointer diagram-box bg-green-50 border-green-300" data-title="Concrete Strategy: Regex Tier" data-desc="A high-speed, low-resource strategy that uses regular expressions for command matching. Selected on systems with limited capabilities.">
                                    <h5 class="font-semibold">RegexTierStrategy</h5>
                                </div>
                                <div class="strategy-component p-2 border rounded-lg cursor-pointer diagram-box bg-yellow-50 border-yellow-300" data-title="Concrete Strategy: NLP Tier" data-desc="A more sophisticated strategy using spaCy and SentenceTransformers. Selected when sufficient RAM and model files are available.">
                                    <h5 class="font-semibold">NLPTierStrategy</h5>
                                </div>
                                 <div class="strategy-component p-2 border rounded-lg cursor-pointer diagram-box bg-red-50 border-red-300" data-title="Concrete Strategy: LLM Tier" data-desc="A future, high-resource strategy using a full Large Language Model. Would be selected on systems with powerful GPUs and ample RAM.">
                                    <h5 class="font-semibold">LLMTierStrategy</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="strategy-info-box" class="mt-6 p-6 bg-stone-100 rounded-lg">
                        <h3 id="strategy-title" class="text-lg font-bold">Click a component to see details</h3>
                        <p id="strategy-desc" class="mt-2 text-stone-700">This interactive diagram illustrates how the Strategy Pattern allows the core application to remain independent of the various AI processing tiers, making the system extensible and testable.</p>
                    </div>
                </div>
            </section>

            <!-- AI Engine Section -->
            <section id="ai" class="content-section">
                 <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold mb-4">The Multi-Tiered AI Engine</h2>
                    <p class="text-stone-600 mb-6">The "Non-LLM AI Arsenal" is a hybrid NLP system designed to balance speed, precision, and contextual understanding. It processes user input through a series of tiers, starting with the fastest and most precise methods and escalating to more complex semantic analysis only when necessary. This ensures a responsive experience while still handling natural language effectively.</p>

                    <div class="flex flex-col md:flex-row gap-8">
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold mb-4">Tier 1: High-Speed Rule Matching</h3>
                            <p class="text-stone-600 mb-2">The first line of defense uses `spaCy`'s `Matcher` and `PhraseMatcher`. This tier instantly recognizes fixed commands and known keywords with extreme efficiency, using algorithms like Aho-Corasick. It's fast because it avoids neural inference.</p>
                            <h3 class="text-xl font-semibold mb-4 mt-6">Tier 2: Semantic Intent Matching</h3>
                            <p class="text-stone-600 mb-2">When a rule doesn't match, the system uses `SentenceTransformers` to understand the query's semantic meaning. It converts the user's query and a list of "canonical intents" into vector embeddings and finds the closest match using cosine similarity. This handles synonyms and variations in phrasing.</p>
                             <h3 class="text-xl font-semibold mb-4 mt-6">Performance Optimization</h3>
                            <p class="text-stone-600 mb-2">To keep Tier 2 fast, `diskcache` is used to store pre-computed embeddings for canonical intents and frequent user queries, avoiding redundant calculations.</p>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold mb-4">Technology Comparison</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left text-stone-500">
                                    <thead class="text-xs text-stone-700 uppercase bg-stone-100">
                                        <tr>
                                            <th scope="col" class="px-6 py-3">Component</th>
                                            <th scope="col" class="px-6 py-3">Primary Task</th>
                                            <th scope="col" class="px-6 py-3">Strengths</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="bg-white border-b hover:bg-stone-50">
                                            <th scope="row" class="px-6 py-4 font-medium text-stone-900 whitespace-nowrap">`spaCy` Matcher</th>
                                            <td class="px-6 py-4">Exact pattern matching</td>
                                            <td class="px-6 py-4">Extremely fast, 100% precision, explainable</td>
                                        </tr>
                                        <tr class="bg-white border-b hover:bg-stone-50">
                                            <th scope="row" class="px-6 py-4 font-medium text-stone-900 whitespace-nowrap">`SentenceTransformers`</th>
                                            <td class="px-6 py-4">Semantic intent matching</td>
                                            <td class="px-6 py-4">Robust to synonyms/typos, high context understanding</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Learning Loop Section -->
            <section id="learning" class="content-section">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold mb-4">The "Persona of One" Learning Loop</h2>
                    <p class="text-stone-600 mb-6">The ultimate goal is to create a system that adapts to an individual user over time. This is achieved via a **decoupled, asynchronous learning loop**. This architecture ensures that computationally expensive model training does not block or slow down the main user-facing application, preserving a responsive experience.</p>

                    <h3 class="text-xl font-semibold mb-4">Data Flow of the Decoupled Loop</h3>
                    <div class="relative border-l-2 border-dashed border-stone-300 ml-4 pl-8 py-4 space-y-8">
                        <div class="absolute w-4 h-4 bg-blue-500 rounded-full -left-2 top-6 border-4 border-white"></div>
                        <div>
                            <h4 class="font-bold">1. Evidence Logging</h4>
                            <p class="text-stone-600">The main application logs every meaningful user interaction (command, success, timing) to a persistent SQLite database.</p>
                        </div>
                        <div class="absolute w-4 h-4 bg-blue-500 rounded-full -left-2 top-32 border-4 border-white"></div>
                        <div>
                            <h4 class="font-bold">2. Asynchronous Triggering</h4>
                            <p class="text-stone-600">A scheduler (`APScheduler`) triggers a model update job at regular intervals or during inactivity.</p>
                        </div>
                        <div class="absolute w-4 h-4 bg-blue-500 rounded-full -left-2 top-56 border-4 border-white"></div>
                        <div>
                            <h4 class="font-bold">3. Background Model Update</h4>
                            <p class="text-stone-600">A task queue worker (`Dramatiq`) picks up the job, reads new evidence from the log, and retrains the user models (BKT, DBNs).</p>
                        </div>
                         <div class="absolute w-4 h-4 bg-blue-500 rounded-full -left-2 bottom-6 border-4 border-white"></div>
                        <div>
                            <h4 class="font-bold">4. Model Persistence</h4>
                            <p class="text-stone-600">The worker saves the refined model parameters back to disk. The main app loads the updated model on its next startup.</p>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-4 mt-8">User Modeling Techniques</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-4 border rounded-lg bg-stone-50">
                            <h4 class="font-bold">Bayesian Knowledge Tracing (BKT)</h4>
                            <p class="text-sm text-stone-600 mt-2">A model for tracking a user's mastery of a single, discrete skill (e.g., using a specific command). It's a great tactical starting point.</p>
                        </div>
                        <div class="p-4 border rounded-lg bg-stone-50">
                            <h4 class="font-bold">Dynamic Bayesian Networks (DBN)</h4>
                            <p class="text-sm text-stone-600 mt-2">A more powerful model that can represent the complex, time-varying relationships between many user attributes (skills, speed, engagement). This is the strategic long-term goal for a holistic "Persona of One".</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Roadmap Section -->
            <section id="roadmap" class="content-section">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h2 class="text-2xl font-bold mb-4">Implementation & Research Roadmap</h2>
                    <p class="text-stone-600 mb-6">The following phased roadmap provides a logical sequence for development, starting with foundational components and progressively building towards more complex, research-oriented features. The chart below visualizes the relative effort and focus for each phase.</p>

                    <div class="chart-container mb-8">
                        <canvas id="roadmapChart"></canvas>
                    </div>

                    <div id="accordion-container" class="space-y-2">
                        <!-- Accordion items will be injected by JS -->
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab');
            const sections = document.querySelectorAll('.content-section');
            const diagramBoxes = document.querySelectorAll('.diagram-box');
            const diagramInfoBox = document.getElementById('diagram-info-box');
            const strategyComponents = document.querySelectorAll('.strategy-component');
            const strategyTitle = document.getElementById('strategy-title');
            const strategyDesc = document.getElementById('strategy-desc');
            const accordionContainer = document.getElementById('accordion-container');

            const roadmapData = {
                phases: [
                    {
                        title: 'Phase 1: Foundational Setup & Core Loop',
                        effort: 25,
                        details: [
                            'Implement the Strategy Pattern with placeholder strategies.',
                            'Build the `SystemCapabilities` object for environment probing.',
                            'Establish the basic `Textual` TUI layout and widgets.',
                            'Create the initial Nix derivation using `buildPythonApplication`.'
                        ]
                    },
                    {
                        title: 'Phase 2: Implement High-Performance NLP Tier',
                        effort: 35,
                        details: [
                            'Integrate `spaCy` `PhraseMatcher` for Tier 1 rule-based matching.',
                            'Integrate `SentenceTransformers` for Tier 2 semantic matching.',
                            'Implement `diskcache` to cache embeddings and boost performance.'
                        ]
                    },
                    {
                        title: 'Phase 3: Build the Asynchronous Learning Loop',
                        effort: 25,
                        details: [
                            'Define SQLite schema and instrument the app to log user evidence.',
                            'Set up `APScheduler` and `Dramatiq` for the async backend.',
                            'Implement an initial Bayesian Knowledge Tracing (BKT) model.'
                        ]
                    },
                    {
                        title: 'Phase 4: Research & Develop DBN "Persona of One"',
                        effort: 15,
                        details: [
                            'Design the structure of the Dynamic Bayesian Network (DBN).',
                            'Adapt the async worker to perform parameter learning for the DBN.',
                            'Integrate the DBN to make adaptive decisions in the UI.'
                        ]
                    }
                ]
            };

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    sections.forEach(s => s.classList.remove('active'));

                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });

            diagramBoxes.forEach(box => {
                box.addEventListener('mouseenter', () => {
                    diagramInfoBox.innerHTML = `<p>${box.dataset.info}</p>`;
                });
                box.addEventListener('mouseleave', () => {
                    diagramInfoBox.innerHTML = '<p>Hover over a box to see its description.</p>';
                });
            });

            strategyComponents.forEach(comp => {
                comp.addEventListener('click', () => {
                    strategyTitle.textContent = comp.dataset.title;
                    strategyDesc.textContent = comp.dataset.desc;
                });
            });

            roadmapData.phases.forEach((phase, index) => {
                const accordionItem = `
                    <div class="rounded-lg border border-stone-200">
                        <h2>
                            <button type="button" class="flex items-center justify-between w-full p-5 font-medium text-left text-stone-800 bg-stone-100 hover:bg-stone-200" data-accordion-target="#accordion-body-${index}">
                                <span>${phase.title}</span>
                                <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                                </svg>
                            </button>
                        </h2>
                        <div id="accordion-body-${index}" class="hidden p-5 border-t border-stone-200">
                            <ul class="list-disc pl-5 text-stone-600 space-y-1">
                                ${phase.details.map(d => `<li>${d}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                accordionContainer.innerHTML += accordionItem;
            });

            document.querySelectorAll('[data-accordion-target]').forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.getAttribute('data-accordion-target');
                    const targetPanel = document.querySelector(targetId);
                    const icon = button.querySelector('svg');
                    targetPanel.classList.toggle('hidden');
                    icon.classList.toggle('rotate-180');
                });
            });

            const ctx = document.getElementById('roadmapChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: roadmapData.phases.map(p => p.title.split(':')[0]),
                    datasets: [{
                        label: 'Relative Effort (%)',
                        data: roadmapData.phases.map(p => p.effort),
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.5)',
                            'rgba(234, 179, 8, 0.5)',
                            'rgba(139, 92, 246, 0.5)',
                            'rgba(16, 185, 129, 0.5)'
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(234, 179, 8, 1)',
                            'rgba(139, 92, 246, 1)',
                            'rgba(16, 185, 129, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Effort (%)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
