<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecting Symbiosis: An Interactive Blueprint</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Warm Gray, Slate, Soft Blue) -->
    <!-- Application Structure Plan: A tab-based dashboard structure is used to deconstruct the dense report into logical, explorable themes: Roadmap, Technology Stack, and Philosophy. This non-linear approach allows the user to explore the project based on their immediate interest (the "what," the "how," or the "why") rather than being forced through a linear document. The default view is the 'Roadmap', providing an immediate, high-level overview of the project's phased plan. Interactive cards within each phase allow for progressive disclosure of details, preventing information overload and encouraging exploration. This design prioritizes usability and quick synthesis of complex relationships between different parts of the plan. -->
    <!-- Visualization & Content Choices: Report Info -> The core 3-phase roadmap. Goal -> Organize & show change. Viz -> Interactive HTML/CSS cards in a multi-column layout. Interaction -> Click-to-reveal details. Justification -> More engaging and less overwhelming than a wall of text. | Report Info -> Tech comparison table. Goal -> Compare. Viz -> Styled HTML table. Interaction -> Static with visual highlight. Justification -> Clearest method for direct comparison. | Report Info -> Overall technology distribution. Goal -> Inform/Organize. Viz -> Donut Chart (Chart.js). Interaction -> Hover for tooltips. Justification -> Provides a quick visual summary of the project's technical composition, adding a new layer of insight not present in the original report. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F7F4;
            color: #2c3e50;
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #4A90E2;
            color: #ffffff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .nav-button:not(.active):hover {
            background-color: #e0e7ff;
        }
        .card {
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.7s ease-in-out;
        }
        .details.open {
            max-height: 1000px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 450px;
            max-height: 80vh;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-800 mb-2">Architecting Symbiosis</h1>
            <p class="text-lg text-slate-600">An Interactive Blueprint for "Nix for Humanity"</p>
        </header>

        <nav class="flex justify-center items-center bg-white/70 backdrop-blur-sm rounded-full shadow-sm p-2 mb-8 md:mb-12 sticky top-4 z-10 max-w-md mx-auto">
            <button data-target="roadmap" class="nav-button active text-sm md:text-base font-semibold py-2 px-4 md:px-6 rounded-full">Roadmap</button>
            <button data-target="tech" class="nav-button text-sm md:text-base font-semibold py-2 px-4 md:px-6 rounded-full">Tech Stack</button>
            <button data-target="philosophy" class="nav-button text-sm md:text-base font-semibold py-2 px-4 md:px-6 rounded-full">Philosophy</button>
        </nav>

        <main>
            <section id="roadmap" class="content-section">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-slate-700 mb-2">A Phased Implementation Plan</h2>
                    <p class="max-w-3xl mx-auto text-slate-600">This roadmap translates the project's vision into a concrete, three-phase plan. Each phase builds upon the last, evolving the AI from a considerate interface to a true symbiotic partner with deep domain mastery. Click on any item to explore its details.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                    <!-- Phase 1 -->
                    <div class="bg-white/50 p-6 rounded-xl shadow-md border border-gray-200">
                        <div class="flex items-center mb-4">
                            <span class="bg-sky-100 text-sky-800 text-sm font-bold mr-3 px-3 py-1.5 rounded-full">1</span>
                            <h3 class="text-2xl font-bold text-slate-800">Humane Interface</h3>
                        </div>
                        <p class="text-slate-600 mb-6">Focuses on making the AI considerate, resilient, and empowering in its interactions.</p>
                        <div id="phase1-cards" class="space-y-4"></div>
                    </div>

                    <!-- Phase 2 -->
                    <div class="bg-white/50 p-6 rounded-xl shadow-md border border-gray-200">
                        <div class="flex items-center mb-4">
                            <span class="bg-amber-100 text-amber-800 text-sm font-bold mr-3 px-3 py-1.5 rounded-full">2</span>
                            <h3 class="text-2xl font-bold text-slate-800">Domain Mastery</h3>
                        </div>
                        <p class="text-slate-600 mb-6">Evolves the AI from an assistant that knows commands to a partner that understands code.</p>
                        <div id="phase2-cards" class="space-y-4"></div>
                    </div>

                    <!-- Phase 3 -->
                    <div class="bg-white/50 p-6 rounded-xl shadow-md border border-gray-200">
                        <div class="flex items-center mb-4">
                            <span class="bg-emerald-100 text-emerald-800 text-sm font-bold mr-3 px-3 py-1.5 rounded-full">3</span>
                            <h3 class="text-2xl font-bold text-slate-800">Living System</h3>
                        </div>
                        <p class="text-slate-600 mb-6">Builds the architecture for long-term memory, resilience, and privacy-preserving evolution.</p>
                        <div id="phase3-cards" class="space-y-4"></div>
                    </div>

                </div>
            </section>

            <section id="tech" class="content-section hidden">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-slate-700 mb-2">Technology & Tools</h2>
                    <p class="max-w-3xl mx-auto text-slate-600">This section provides an overview of the key technologies that power the project. The chart visualizes the distribution of tools across different architectural areas, while the table compares foundational choices.</p>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-center mb-4">Technology Distribution</h3>
                        <div class="chart-container">
                            <canvas id="techChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-center mb-6">Foundational Tooling: A Comparison</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">Feature</th>
                                        <th scope="col" class="px-6 py-3 bg-sky-50">poetry2nix (Chosen)</th>
                                        <th scope="col" class="px-6 py-3">dream2nix</th>
                                    </tr>
                                </thead>
                                <tbody id="tech-comparison-table">
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-400 text-blue-800 rounded-r-lg">
                            <h4 class="font-bold">Rationale</h4>
                            <p class="text-sm">For a solo developer, the stability, extensive community knowledge, and large set of pre-existing overrides for `poetry2nix` currently make it the more pragmatic choice, even with its "unmaintained" status.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="philosophy" class="content-section hidden">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-slate-700 mb-2">Guiding Principles</h2>
                    <p class="max-w-3xl mx-auto text-slate-600">The project's architecture is not just a technical specification; it's the embodiment of a core philosophy. This section connects each guiding principle to the concrete technologies that bring it to life.</p>
                </div>
                <div id="philosophy-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
            </section>
        </main>

    </div>

    <script>
        const appData = {
            roadmap: [
                { phase: 1, title: "Attentional Computing", tech: "pynput", goal: "Implement an idle timer to find opportune moments for interaction, respecting the user's cognitive state." },
                { phase: 1, title: "Conversational Repair", tech: "Custom Confidence Logic", goal: "When uncertain, the AI asks for clarification instead of executing the wrong command, building trust through vulnerability." },
                { phase: 1, title: "Counterfactual XAI", tech: "DiCE Library", goal: "Explain errors by showing the user what they could have done differently to succeed, turning the AI into a teacher." },
                { phase: 2, title: "Nix AST Parsing", tech: "tree-sitter-nix", goal: "Parse Nix code to understand its structure, enabling intelligent error diagnosis beyond simple string matching." },
                { phase: 3, title: "Asynchronous Memory", tech: "APScheduler", goal: "A background 'sleep cycle' consolidates daily interactions into long-term memories, allowing the AI to reason about growth." },
                { phase: 3, title: "Self-Synthesized Rehearsal", tech: "Hugging Face TRL", goal: "The AI generates its own practice data to prevent forgetting, enabling learning without ever reusing user data." },
            ],
            techComparison: [
                { feature: 'Philosophy', p2n: 'Specialized for Poetry', d2n: 'Generalized for many languages' },
                { feature: 'Maturity', p2n: 'Mature, stable, "unmaintained"', d2n: 'Newer, actively developed' },
                { feature: 'Ease of Use', p2n: 'Well-understood patterns', d2n: 'More "magical", can be opaque' },
                { feature: 'Community', p2n: 'Extensive usage & overrides', d2n: 'Growing knowledge base' },
            ],
            philosophy: [
                { title: "Respecting Cognitive State", description: "The AI knows *when* to speak.", implementation: "Attentional Computing" },
                { title: "Vulnerability as Strength", description: "The AI admits uncertainty to build trust.", implementation: "Conversational Repair" },
                { title: "Empowering the User", description: "The AI acts as a teacher, not just an explainer.", implementation: "Counterfactual XAI" },
                { title: "Deep Domain Understanding", description: "The AI understands code, not just commands.", implementation: "Nix AST Parsing" },
                { title: "Long-Term Partnership", description: "The AI reflects and grows over time.", implementation: "Asynchronous Memory" },
                { title: "Privacy Sanctuary", description: "The AI learns without reusing user data.", implementation: "Self-Synthesized Rehearsal" },
                { title: "Declarative Purity", description: "The build process reflects the system's core values.", implementation: "poetry2nix" },
                { title: "User Sovereignty", description: "Making data ownership a verifiable reality.", implementation: "Datasette" },
                { title: "Operational Excellence", description: "Enabling rapid, efficient development cycles.", implementation: "Cachix" },
            ],
            techChartData: {
                labels: ['Humane Interface', 'Domain Mastery', 'Living System', 'Developer Tools'],
                data: [3, 1, 2, 3]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const phase1Container = document.getElementById('phase1-cards');
            const phase2Container = document.getElementById('phase2-cards');
            const phase3Container = document.getElementById('phase3-cards');
            const techComparisonTable = document.getElementById('tech-comparison-table');
            const philosophyGrid = document.getElementById('philosophy-grid');

            function createCard(item) {
                const card = document.createElement('div');
                card.className = 'card bg-white rounded-lg shadow-sm cursor-pointer p-4';
                card.innerHTML = `
                    <div class="flex justify-between items-center">
                        <h4 class="font-bold text-slate-700">${item.title}</h4>
                        <span class="text-blue-500 transform transition-transform duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        </span>
                    </div>
                    <div class="details text-sm text-slate-600 mt-2 pt-2 border-t border-gray-100">
                        <p class="mb-2">${item.goal}</p>
                        <p><span class="font-semibold text-slate-700">Core Tech:</span> <code class="bg-gray-100 text-gray-800 text-xs font-mono px-1 py-0.5 rounded">${item.tech}</code></p>
                    </div>
                `;
                card.addEventListener('click', () => {
                    card.querySelector('.details').classList.toggle('open');
                    card.querySelector('svg').parentElement.classList.toggle('rotate-180');
                });
                return card;
            }

            appData.roadmap.forEach(item => {
                const card = createCard(item);
                if (item.phase === 1) phase1Container.appendChild(card);
                if (item.phase === 2) phase2Container.appendChild(card);
                if (item.phase === 3) phase3Container.appendChild(card);
            });

            appData.techComparison.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'bg-white border-b';
                row.innerHTML = `
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">${item.feature}</th>
                    <td class="px-6 py-4 bg-sky-50">${item.p2n}</td>
                    <td class="px-6 py-4">${item.d2n}</td>
                `;
                techComparisonTable.appendChild(row);
            });

            appData.philosophy.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-white p-5 rounded-xl shadow-md border border-gray-200';
                card.innerHTML = `
                    <h4 class="font-bold text-lg text-slate-800 mb-1">${item.title}</h4>
                    <p class="text-slate-500 text-sm mb-3">${item.description}</p>
                    <div class="border-t pt-3">
                        <p class="text-xs text-slate-400 uppercase font-semibold mb-1">Implementation</p>
                        <p class="font-medium text-slate-700">${item.implementation}</p>
                    </div>
                `;
                philosophyGrid.appendChild(card);
            });

            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.dataset.target;

                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    contentSections.forEach(section => {
                        if (section.id === targetId) {
                            section.classList.remove('hidden');
                        } else {
                            section.classList.add('hidden');
                        }
                    });
                });
            });

            const ctx = document.getElementById('techChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: appData.techChartData.labels,
                    datasets: [{
                        label: 'Technology Count',
                        data: appData.techChartData.data,
                        backgroundColor: [
                            'rgba(56, 189, 248, 0.7)', // sky
                            'rgba(251, 191, 36, 0.7)', // amber
                            'rgba(52, 211, 153, 0.7)', // emerald
                            'rgba(129, 140, 248, 0.7)'  // indigo
                        ],
                        borderColor: [
                            'rgba(56, 189, 248, 1)',
                            'rgba(251, 191, 36, 1)',
                            'rgba(52, 211, 153, 1)',
                            'rgba(129, 140, 248, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + ' technologies';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
