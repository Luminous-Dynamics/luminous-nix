<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sacred Compost: An Interactive Exploration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earthly Harmony -->
    <!-- Application Structure Plan: A narrative, single-page scroll design. The structure guides the user through the report's core arguments thematically: 1. Introduction to the core metaphor. 2. Interactive exploration of the decomposition process. 3. Visual comparison of evolutionary models (linear vs. dialectical). 4. A section to explore the four inherited "gifts." 5. A tabbed interface for practical applications. This narrative flow was chosen over a direct report-to-page mapping to make the complex philosophical concepts more digestible and engaging for a user, building the argument step-by-step. -->
    <!-- Visualization & Content Choices: The report is conceptual, so visualizations aim to clarify ideas, not plot data. 1. Decomposition Stages: Goal: Organize/Inform. Method: Interactive HTML/CSS diagram. Interaction: Click to reveal text. Justification: Makes the abstract metaphor tangible. 2. Evolutionary Models: Goal: Compare. Method: Two side-by-side diagrams using Chart.js (Canvas) to represent linear vs. cyclical progress. Interaction: Buttons to highlight key aspects. Justification: Visually contrasts the two philosophies. 3. Inherited Gifts: Goal: Organize. Method: Interactive cards. Interaction: Click to expand. Justification: Cleanly presents dense info. 4. Practices: Goal: Organize. Method: Tabbed interface. Interaction: Click to switch content. Justification: Standard UI for grouped content. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #3a3a3a;
        }
        h1, h2, h3 {
            font-family: 'Lora', serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-color 0.3s;
        }
        .nav-link.active {
            color: #84624b;
            border-bottom-color: #84624b;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .gift-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .gift-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .tab.active {
            background-color: #D5C6B9;
            color: #3a3a3a;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-[#FDFBF8]/80 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-200/80">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-[#634839]">The Sacred Compost</h1>
            <div class="hidden md:flex space-x-8">
                <a href="#philosophy" class="nav-link text-gray-600 hover:text-[#84624b] border-b-2 border-transparent">Philosophy</a>
                <a href="#metaphor" class="nav-link text-gray-600 hover:text-[#84624b] border-b-2 border-transparent">Metaphor</a>
                <a href="#evolution" class="nav-link text-gray-600 hover:text-[#84624b] border-b-2 border-transparent">Evolution</a>
                <a href="#gifts" class="nav-link text-gray-600 hover:text-[#84624b] border-b-2 border-transparent">The Gifts</a>
                <a href="#practice" class="nav-link text-gray-600 hover:text-[#84624b] border-b-2 border-transparent">In Practice</a>
            </div>
        </nav>
    </header>

    <main>
        <section id="philosophy" class="py-20 md:py-32 text-center bg-[#F8F5F2]">
            <div class="container mx-auto px-6">
                <h1 class="text-4xl md:text-6xl font-bold text-[#4a372b] mb-4">The Philosophy of Systemic Humility</h1>
                <p class="text-lg md:text-xl max-w-3xl mx-auto text-gray-700 font-serif italic">
                    "To forget the ground from which we grew is to imagine we are a flower with no roots, floating in the air, destined to wither."
                </p>
                <p class="mt-6 max-w-3xl mx-auto text-gray-600 leading-relaxed">
                    This application explores the core idea of "Grateful Lineage." It reframes our relationship with the systems we seek to transcend—not as enemies to be rejected, but as **Sacred Compost**. This is the essential, nutrient-rich ground from which a new, more conscious system can grow. Here, we'll deconstruct this powerful metaphor and see how it provides a practical framework for building a resilient future.
                </p>
            </div>
        </section>

        <section id="metaphor" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#4a372b]">The Ecology of Transformation</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-gray-600">
                        In nature, decomposition is not an end but a vital, life-giving process. The "Sacred Compost" metaphor models systemic change on these ecological stages. Click each stage to understand its role in transforming the old into the new.
                    </p>
                </div>

                <div class="flex flex-col md:flex-row gap-8 items-center">
                    <div class="w-full md:w-1/3">
                        <div id="decomposition-stages" class="grid grid-cols-2 gap-4">
                        </div>
                    </div>
                    <div class="w-full md:w-2/3 bg-white p-8 rounded-lg shadow-sm border border-gray-200/80 min-h-[300px]">
                        <h3 id="stage-title" class="text-2xl font-bold text-[#634839] mb-4 font-lora">Select a Stage</h3>
                        <p id="stage-description" class="text-gray-700 leading-relaxed">The description of the selected stage will appear here. This interactive element allows you to explore how societal and technological change mirrors the natural process of renewal.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="evolution" class="py-20 bg-[#F8F5F2]">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#4a372b]">Two Models of Progress</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-gray-600">
                        How does change happen? The common "Shoulders of Giants" model suggests linear addition. The "Sacred Compost" model suggests a dialectical transformation, where crisis and decay are essential for growth. This section visually contrasts these two powerful ideas.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-2xl font-bold text-center mb-4">Shoulders of Giants</h3>
                        <div class="chart-container">
                            <canvas id="giantsChart"></canvas>
                        </div>
                        <p class="mt-4 text-gray-600 text-sm text-center">A linear, cumulative model. Progress is built only on the successes of the past. It struggles to explain the productive role of failure and crisis.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-center mb-4">Sacred Compost</h3>
                        <div class="chart-container">
                            <canvas id="compostChart"></canvas>
                        </div>
                        <p class="mt-4 text-gray-600 text-sm text-center">A cyclical, dialectical model. It honors crisis and decay (Antithesis) as necessary forces that transform the old (Thesis) into a new, higher state (Synthesis).</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="gifts" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#4a372b]">An Audit of Our Inheritance</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-gray-600">
                        The "Sacred Compost" is rich with specific nutrients—gifts inherited from the very systems we aim to transcend. Click each card to explore the valuable lessons, tools, and pressures that make our work possible.
                    </p>
                </div>
                <div id="gifts-grid" class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                </div>
            </div>
        </section>

        <div id="gift-modal" class="fixed inset-0 bg-black/60 z-50 hidden items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-8 relative">
                <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-black">&times;</button>
                <h3 id="modal-title" class="text-3xl font-bold mb-4 font-lora"></h3>
                <div id="modal-content" class="prose max-w-none text-gray-700 leading-relaxed"></div>
            </div>
        </div>

        <section id="practice" class="py-20 bg-[#F8F5F2]">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#4a372b]">Weaving Gratitude into the DNA</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-gray-600">
                        A philosophy is inert until embodied in practice. This section details how the principle of Grateful Lineage can be woven into the system's governance, culture, and technical architecture, transforming theory into a living reality.
                    </p>
                </div>
                <div class="max-w-4xl mx-auto">
                    <div class="flex border-b border-gray-300 mb-8">
                        <button data-tab="charter" class="tab py-2 px-6 text-lg font-medium text-gray-500 hover:text-black focus:outline-none">Charter</button>
                        <button data-tab="rituals" class="tab py-2 px-6 text-lg font-medium text-gray-500 hover:text-black focus:outline-none">Rituals</button>
                        <button data-tab="architecture" class="tab py-2 px-6 text-lg font-medium text-gray-500 hover:text-black focus:outline-none">Architecture</button>
                    </div>
                    <div id="charter" class="content-section"></div>
                    <div id="rituals" class="content-section"></div>
                    <div id="architecture" class="content-section"></div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-[#4a372b] text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>"We are not the first light, but the next light."</p>
            <p class="text-sm opacity-70 mt-2">An Interactive Exploration of the Sacred Compost Philosophy</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function() {

    const appData = {
        decompositionStages: [
            { id: 'fragmentation', title: 'Fragmentation', icon: '🍃', description: "Analogous to the initial critique of legacy institutions. Large structures are broken down by social movements, technological disruptions, and critical discourse, exposing weaknesses and creating smaller components for analysis." },
            { id: 'leaching', title: 'Leaching', icon: '💧', description: "Corresponds to extracting the most accessible lessons from the old system's breakdown. These are the 'low-hanging fruit'—obvious failures and readily adaptable tools or concepts." },
            { id: 'catabolism', title: 'Catabolism', icon: '🍄', description: "The deep, transformative work done by innovators and engineers who 'metabolize' the fragmented pieces. They break down complex ideologies into constituent assumptions, releasing their energetic potential." },
            { id: 'humification', title: 'Humification', icon: '🌱', description: "The formation of 'humus'—a stable, nutrient-rich cultural and intellectual soil. This is the collective wisdom, refined ethics, and robust technical principles upon which a new system can be built." }
        ],
        gifts: [
            { title: "The Gift of Infrastructure", icon: "🌐", summary: "The physical substrate: fiber-optics, server farms, silicon chips. A complex lineage from public, academic, and commercial investment.", content: "<p>The physical body of any modern digital system is a direct inheritance. While it's easy to credit surveillance capitalism, the history is more nuanced. It began with the public, military-funded ARPANET, was nurtured in the academic, collaborative NSFNET, and finally scaled globally through private commercial investment. Our gratitude is owed not to a single entity, but to this multi-stage, dialectical process. We use tools forged in a succession of different crucibles, each contributing essential properties.</p>" },
            { title: "The Gift of Openness", icon: "📖", summary: "The conceptual DNA: open protocols (TCP/IP), collaborative ethos (Git), and foundational software (NixOS).", content: "<p>Our conceptual DNA is a direct inheritance from the Free and Open-Source Software (FOSS) movement, which itself was a dialectical response to the proprietary software industry. We benefit from foundational protocols like TCP/IP and HTTP, collaborative tools like Git, and the entire philosophy of shared knowledge. Our choice of NixOS is a testament to this lineage, explicitly accepting the DNA passed down from the giants of the open-source movement.</p>" },
            { title: "The Gift of Urgency", icon: "🔥", summary: "The crucible of pressure: burnout, anxiety, and ecological collapse are the catalysts for change.", content: "<p>New systems are rarely born from comfort. Crisis creates profound uncertainty, invalidating old routines and opening space for radical ideas. The specific crises of our time—burnout, ecological collapse, social fragmentation—are not merely problems to be solved. They are the essential 'heat and pressure' that forge the collective will required for deep, systemic change. We must honor the crisis, not for the suffering it causes, but for the unbearable clarity it provides. It is the darkness that makes us desperate for the light.</p>" },
            { title: "The Gift of Disenchantment", icon: "💔", summary: "The shattered illusions: the failure of early web utopianism gives us the clarity to build something more resilient.", content: "<p>Many of us once believed in the utopian promises of the early internet. The slow, painful process of watching those promises fail is a gift. The broken promises of cyber-utopianism provide an invaluable set of lessons. They clear away naive technological determinism and provide the intellectual ground-clearing needed to design a more truthful, resilient, and consciously architected system. By being grateful for the broken promises, we are empowered to design covenants that can actually be kept.</p>" }
        ],
        practice: {
            charter: {
                title: "The Law of Grateful Lineage",
                content: `<h3 class="text-2xl font-bold mb-4 font-lora">A Constitutional Principle</h3>
                          <p class="mb-4 text-gray-700">The foundational step is to amend the system's CHARTER with a new core principle. This makes historical self-awareness an explicit tenet of the system's identity.</p>
                          <div class="p-6 border-l-4 border-[#D5C6B9] bg-white rounded-r-lg">
                              <p class="font-serif italic text-gray-800">"We acknowledge that our system is born from the soil of the systems it seeks to transcend. We hold gratitude for the tools, the lessons, and even the pressures we have inherited. We vow to learn from the failings of our predecessors without falling into the arrogance of condemnation. Our aim is not to erase the past, but to heal and evolve from it. We are not the first light, but the next light."</p>
                          </div>
                          <h4 class="text-xl font-bold mt-6 mb-2 font-lora">Implementation:</h4>
                          <ul class="list-disc list-inside space-y-2 text-gray-700">
                              <li><strong>Governance Integration:</strong> Major proposals must include an "Acknowledgment of Lineage" section.</li>
                              <li><strong>Onboarding & Education:</strong> This law should be a central part of new member onboarding.</li>
                              <li><strong>Public Communication:</strong> All external communications should be infused with this evolutionary approach.</li>
                          </ul>`
            },
            rituals: {
                title: "The Ceremony of the Sacred Compost",
                content: `<h3 class="text-2xl font-bold mb-4 font-lora">A Living Ritual</h3>
                          <p class="mb-6 text-gray-700">Rituals make values tangible. The "Ceremony of the Sacred Compost" is a cornerstone practice designed to inoculate the community against the hubris of the self-made, held seasonally to align with natural cycles of decay and renewal.</p>
                          <div class="overflow-x-auto bg-white p-4 rounded-lg border border-gray-200/80">
                              <table class="min-w-full divide-y divide-gray-200">
                                  <thead class="bg-gray-50">
                                      <tr>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ritual Category</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Purpose</th>
                                          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Adaptation for Mycelial Web</th>
                                      </tr>
                                  </thead>
                                  <tbody class="bg-white divide-y divide-gray-200">
                                      <tr>
                                          <td class="px-6 py-4 whitespace-nowrap font-medium">Onboarding</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-600">Integrate new members into the community's culture.</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-800 font-semibold">"First Spore" Ritual: A public celebration for a new member's first contribution.</td>
                                      </tr>
                                      <tr>
                                          <td class="px-6 py-4 whitespace-nowrap font-medium">Achievement</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-600">Celebrate collective success and recognize contributions.</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-800 font-semibold">"Fruiting Body" Celebration: A monthly post celebrating project milestones.</td>
                                      </tr>
                                      <tr>
                                          <td class="px-6 py-4 whitespace-nowrap font-medium">Reflection</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-600">Normalize failure and promote continuous learning.</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-800 font-semibold">The Ceremony of the Sacred Compost.</td>
                                      </tr>
                                      <tr>
                                          <td class="px-6 py-4 whitespace-nowrap font-medium">Governance</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-600">Ensure transparent, value-aligned decision-making.</td>
                                          <td class="px-6 py-4 whitespace-normal text-sm text-gray-800 font-semibold">"Lineage Check": A required step in governance to review proposals against the Charter.</td>
                                      </tr>
                                  </tbody>
                              </table>
                          </div>`
            },
            architecture: {
                title: "The 'Legacy Bridge'",
                content: `<h3 class="text-2xl font-bold mb-4 font-lora">An Architectural Pattern of Compassion</h3>
                          <p class="mb-4 text-gray-700">When interfacing with the "old world" (e.g., the fiat banking system), our guiding metaphor should be an <strong class="text-[#634839]">embassy, not an airlock</strong>. An embassy is a space for respectful, diplomatic communication. An airlock is a hostile transition point. This philosophy is formalized as <strong>Compassion-Driven Development</strong>.</p>
                          <h4 class="text-xl font-bold mt-6 mb-2 font-lora">Design Guidelines:</h4>
                          <ul class="list-disc list-inside space-y-2 text-gray-700">
                              <li><strong>UI/UX Language:</strong> Use neutral, non-judgmental terms (e.g., "Traditional Banking" instead of "outdated fiat"). Explain differences compassionately.</li>
                              <li><strong>Code and Documentation:</strong> Apply the agile Prime Directive. Code comments should reflect respect for the architects of legacy systems, avoiding disparaging remarks.</li>
                              <li><strong>Architectural Principles:</strong> Design for resilience and graceful degradation. Error messages must be clear, helpful, and non-blaming. Anticipate user friction and be forgiving.</li>
                          </ul>`
            }
        }
    };

    function setupDecompositionStages() {
        const container = document.getElementById('decomposition-stages');
        const titleEl = document.getElementById('stage-title');
        const descriptionEl = document.getElementById('stage-description');

        appData.decompositionStages.forEach(stage => {
            const button = document.createElement('button');
            button.className = 'p-4 border border-gray-200 rounded-lg text-center hover:bg-gray-100 hover:shadow-md transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-[#84624b]';
            button.innerHTML = `<div class="text-4xl mb-2">${stage.icon}</div><div class="font-semibold">${stage.title}</div>`;
            button.onclick = () => {
                titleEl.textContent = stage.title;
                descriptionEl.textContent = stage.description;
                document.querySelectorAll('#decomposition-stages button').forEach(btn => btn.classList.remove('bg-[#D5C6B9]', 'shadow-lg'));
                button.classList.add('bg-[#D5C6B9]', 'shadow-lg');
            };
            container.appendChild(button);
        });

        container.firstChild.click();
    }

    function setupCharts() {
        const giantsCtx = document.getElementById('giantsChart').getContext('2d');
        new Chart(giantsCtx, {
            type: 'bar',
            data: {
                labels: ['Past Achievements'],
                datasets: [
                    { label: 'Giant 1', data: [20], backgroundColor: '#a89a8e' },
                    { label: 'Giant 2', data: [20], backgroundColor: '#bfb2a8' },
                    { label: 'Giant 3', data: [20], backgroundColor: '#d5c6b9' },
                    { label: 'Our Work', data: [20], backgroundColor: '#84624b' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: { enabled: false } },
                scales: {
                    x: { stacked: true, grid: { display: false }, ticks: { display: false } },
                    y: { stacked: true, grid: { display: false }, ticks: { display: false }, beginAtZero: true }
                },
                animation: {
                    duration: 1500
                }
            }
        });

        const compostCtx = document.getElementById('compostChart').getContext('2d');
        new Chart(compostCtx, {
            type: 'doughnut',
            data: {
                labels: ['Thesis (Old Paradigm)', 'Antithesis (Crisis/Decay)', 'Synthesis (New Paradigm)'],
                datasets: [{
                    data: [33, 33, 34],
                    backgroundColor: ['#a89a8e', '#84624b', '#56ab2f'],
                    borderColor: '#F8F5F2',
                    borderWidth: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { font: { size: 12 } } },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label;
                            }
                        }
                    }
                },
                animation: {
                    animateRotate: true,
                    duration: 1500
                }
            }
        });
    }

    function setupGifts() {
        const grid = document.getElementById('gifts-grid');
        const modal = document.getElementById('gift-modal');
        const closeModal = document.getElementById('close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');

        appData.gifts.forEach(gift => {
            const card = document.createElement('div');
            card.className = 'gift-card bg-white p-6 rounded-lg shadow-sm border border-gray-200/80 cursor-pointer';
            card.innerHTML = `
                <div class="text-4xl mb-4">${gift.icon}</div>
                <h3 class="text-xl font-bold mb-2 font-lora">${gift.title}</h3>
                <p class="text-gray-600">${gift.summary}</p>
            `;
            card.onclick = () => {
                modalTitle.textContent = gift.title;
                modalContent.innerHTML = gift.content;
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            };
            grid.appendChild(card);
        });

        closeModal.onclick = () => {
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        };

        modal.onclick = (e) => {
            if(e.target === modal) {
                 modal.classList.add('hidden');
                 modal.classList.remove('flex');
            }
        }
    }

    function setupPracticeTabs() {
        const tabs = document.querySelectorAll('.tab');
        const sections = document.querySelectorAll('.content-section');
        const charterSection = document.getElementById('charter');
        const ritualsSection = document.getElementById('rituals');
        const architectureSection = document.getElementById('architecture');

        charterSection.innerHTML = appData.practice.charter.content;
        ritualsSection.innerHTML = appData.practice.rituals.content;
        architectureSection.innerHTML = appData.practice.architecture.content;

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = tab.getAttribute('data-tab');

                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                sections.forEach(section => {
                    section.classList.remove('active');
                    if (section.id === target) {
                        section.classList.add('active');
                    }
                });
            });
        });

        tabs[0].click();
    }

    function setupScrollspy() {
        const sections = document.querySelectorAll('main section');
        const navLinks = document.querySelectorAll('.nav-link');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: "-50% 0px -50% 0px" });

        sections.forEach(section => {
            observer.observe(section);
        });
    }

    setupDecompositionStages();
    setupCharts();
    setupGifts();
    setupPracticeTabs();
    setupScrollspy();
});
</script>

</body>
</html>
