#!/usr/bin/env bash
# Nix for Humanity v1.0 - Simple, Reliable, Human-Friendly

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"

# Check if we have Python
if ! command -v python3 &> /dev/null; then
    echo "Error: Python 3 is required but not found."
    echo "Please enter the nix development shell: nix develop"
    exit 1
fi

# Export the project root for Python to find modules
export PYTHONPATH="$PROJECT_ROOT:$PYTHONPATH"

# Use the v1.0 configuration
export NIX_HUMANITY_CONFIG="$PROJECT_ROOT/config/v1.0.yaml"

# Enable native Python backend for performance
export NIX_HUMANITY_PYTHON_BACKEND=true

# Run the v1.0 entry point
exec python3 "$PROJECT_ROOT/nix_humanity_v1.py" "$@"